var $topBar,$button,$visibleLinks,$hiddenLinks,responsiveBreaks,$topBar2,$button2,$visibleLinks2,$hiddenLinks2,responsiveBreaks2;function previewProductMobileNot(){$("div").is(".main_info_preview_product")&&$(".main_info_preview_product").closest(".wrap-popup-window").hide()}function updateTopBar(t,e,i,s,o){var a=e.hasClass("hidden")?t.width():t.width()-e.width()-30;i.width()>a&&window.screen.width>=768?(o.push(i.width()),i.children().last().prependTo(s),e.hasClass("hidden")&&e.removeClass("hidden")):(a>o[o.length-1]&&(s.children().first().appendTo(i),o.pop(),updateTopBar(t,e,i,s,o)),o.length<1&&(e.addClass("hidden"),s.addClass("hidden"))),e.attr("count",o.length),i.width()>a&&window.screen.width>=768&&updateTopBar(t,e,i,s,o)}!function(t){"use strict";if(!t.JCCatalogItem){var e=function(t){e.superclass.constructor.apply(this,arguments),this.buttonNode=BX.create("span",{props:{className:"btn btn-default btn-buy btn-sm",id:this.id},style:"object"==typeof t.style?t.style:{},text:t.text,events:this.contextEvents}),BX.browser.IsIE()&&this.buttonNode.setAttribute("hideFocus","hidefocus")};BX.extend(e,BX.PopupWindowButton),t.JCCatalogItem=function(t){if(this.productType=0,this.showQuantity=!0,this.showAbsent=!0,this.secondPict=!1,this.showOldPrice=!1,this.showMaxQuantity="N",this.relativeQuantityFactor=5,this.showPercent=!1,this.showSkuProps=!1,this.basketAction="ADD",this.showClosePopup=!1,this.useCompare=!1,this.showSubscription=!1,this.visual={ID:"",PICT_ID:"",SECOND_PICT_ID:"",PICT_SLIDER_ID:"",QUANTITY_ID:"",QUANTITY_UP_ID:"",QUANTITY_DOWN_ID:"",PRICE_ID:"",PRICE_OLD_ID:"",DSC_PERC:"",SECOND_DSC_PERC:"",DISPLAY_PROP_DIV:"",BASKET_PROP_DIV:"",SUBSCRIBE_ID:""},this.product={checkQuantity:!1,maxQuantity:0,stepQuantity:1,isDblQuantity:!1,canBuy:!0,name:"",pict:{},id:0,addUrl:"",buyUrl:""},this.basketMode="",this.basketData={useProps:!1,emptyProps:!1,quantity:"quantity",props:"prop",basketUrl:"",sku_props:"",sku_props_var:"basket_props",add_url:"",buy_url:""},this.compareData={compareUrl:"",compareDeleteUrl:"",comparePath:""},this.defaultPict={pict:null,secondPict:null},this.defaultSliderOptions={interval:3e3,wrap:!0},this.slider={options:{},items:[],active:null,sliding:null,paused:null,interval:null,progress:null},this.touch=null,this.quantityDelay=null,this.quantityTimer=null,this.checkQuantity=!1,this.maxQuantity=0,this.minQuantity=0,this.stepQuantity=1,this.isDblQuantity=!1,this.canBuy=!0,this.precision=6,this.precisionFactor=Math.pow(10,this.precision),this.bigData=!1,this.fullDisplayMode=!1,this.viewMode="",this.templateTheme="",this.currentPriceMode="",this.currentPrices=[],this.currentPriceSelected=0,this.currentQuantityRanges=[],this.currentQuantityRangeSelected=0,this.offers=[],this.offerNum=0,this.treeProps=[],this.selectedValues={},this.obProduct=null,this.blockNodes={},this.obQuantity=null,this.obQuantityUp=null,this.obQuantityDown=null,this.obQuantityLimit={},this.obPict=null,this.obSecondPict=null,this.obPictSlider=null,this.obPictSliderIndicator=null,this.obPrice=null,this.obTree=null,this.obBuyBtn=null,this.obBasketActions=null,this.obNotAvail=null,this.obSubscribe=null,this.obDscPerc=null,this.obSecondDscPerc=null,this.obSkuProps=null,this.obMeasure=null,this.obCompare=null,this.obPopupWin=null,this.basketUrl="",this.basketParams={},this.isTouchDevice=BX.hasClass(document.documentElement,"bx-touch"),this.hoverTimer=null,this.hoverStateChangeForbidden=!1,this.mouseX=null,this.mouseY=null,this.useEnhancedEcommerce=!1,this.dataLayerName="dataLayer",this.brandProperty=!1,this.errorCode=0,"object"==typeof t){switch(t.PRODUCT_TYPE&&(this.productType=parseInt(t.PRODUCT_TYPE,10)),this.showQuantity=t.SHOW_QUANTITY,this.showAbsent=t.SHOW_ABSENT,this.secondPict=t.SECOND_PICT,this.showOldPrice=t.SHOW_OLD_PRICE,this.showMaxQuantity=t.SHOW_MAX_QUANTITY,this.relativeQuantityFactor=parseInt(t.RELATIVE_QUANTITY_FACTOR),this.showPercent=t.SHOW_DISCOUNT_PERCENT,this.showSkuProps=t.SHOW_SKU_PROPS,this.showSubscription=t.USE_SUBSCRIBE,t.ADD_TO_BASKET_ACTION&&(this.basketAction=t.ADD_TO_BASKET_ACTION),this.showClosePopup=t.SHOW_CLOSE_POPUP,this.useCompare=t.DISPLAY_COMPARE,this.fullDisplayMode="Y"===t.PRODUCT_DISPLAY_MODE,this.bigData=t.BIG_DATA,this.viewMode=t.VIEW_MODE||"",this.templateTheme=t.TEMPLATE_THEME||"",this.useEnhancedEcommerce="Y"===t.USE_ENHANCED_ECOMMERCE,this.dataLayerName=t.DATA_LAYER_NAME,this.brandProperty=t.BRAND_PROPERTY,this.visual=t.VISUAL,this.productType){case 0:case 1:case 2:t.PRODUCT&&"object"==typeof t.PRODUCT?(this.currentPriceMode=t.PRODUCT.ITEM_PRICE_MODE,this.currentPrices=t.PRODUCT.ITEM_PRICES,this.currentPriceSelected=t.PRODUCT.ITEM_PRICE_SELECTED,this.currentQuantityRanges=t.PRODUCT.ITEM_QUANTITY_RANGES,this.currentQuantityRangeSelected=t.PRODUCT.ITEM_QUANTITY_RANGE_SELECTED,this.showQuantity&&(this.product.checkQuantity=t.PRODUCT.CHECK_QUANTITY,this.product.isDblQuantity=t.PRODUCT.QUANTITY_FLOAT,this.product.checkQuantity&&(this.product.maxQuantity=this.product.isDblQuantity?parseFloat(t.PRODUCT.MAX_QUANTITY):parseInt(t.PRODUCT.MAX_QUANTITY,10)),this.product.stepQuantity=this.product.isDblQuantity?parseFloat(t.PRODUCT.STEP_QUANTITY):parseInt(t.PRODUCT.STEP_QUANTITY,10),this.checkQuantity=this.product.checkQuantity,this.isDblQuantity=this.product.isDblQuantity,this.stepQuantity=this.product.stepQuantity,this.maxQuantity=this.product.maxQuantity,this.minQuantity="Q"===this.currentPriceMode?parseFloat(this.currentPrices[this.currentPriceSelected].MIN_QUANTITY):this.stepQuantity,this.isDblQuantity&&(this.stepQuantity=Math.round(this.stepQuantity*this.precisionFactor)/this.precisionFactor)),this.product.canBuy=t.PRODUCT.CAN_BUY,t.PRODUCT.MORE_PHOTO_COUNT&&(this.product.morePhotoCount=t.PRODUCT.MORE_PHOTO_COUNT,this.product.morePhoto=t.PRODUCT.MORE_PHOTO),t.PRODUCT.RCM_ID&&(this.product.rcmId=t.PRODUCT.RCM_ID),this.canBuy=this.product.canBuy,this.product.name=t.PRODUCT.NAME,this.product.pict=t.PRODUCT.PICT,this.product.id=t.PRODUCT.ID,this.product.DETAIL_PAGE_URL=t.PRODUCT.DETAIL_PAGE_URL,t.PRODUCT.ADD_URL&&(this.product.addUrl=t.PRODUCT.ADD_URL),t.PRODUCT.BUY_URL&&(this.product.buyUrl=t.PRODUCT.BUY_URL),t.BASKET&&"object"==typeof t.BASKET&&(this.basketData.useProps=t.BASKET.ADD_PROPS,this.basketData.emptyProps=t.BASKET.EMPTY_PROPS)):this.errorCode=-1;break;case 3:t.PRODUCT&&"object"==typeof t.PRODUCT&&(this.product.name=t.PRODUCT.NAME,this.product.id=t.PRODUCT.ID,this.product.DETAIL_PAGE_URL=t.PRODUCT.DETAIL_PAGE_URL,this.product.morePhotoCount=t.PRODUCT.MORE_PHOTO_COUNT,this.product.morePhoto=t.PRODUCT.MORE_PHOTO,t.PRODUCT.RCM_ID&&(this.product.rcmId=t.PRODUCT.RCM_ID)),t.OFFERS&&BX.type.isArray(t.OFFERS)&&(this.offers=t.OFFERS,this.offerNum=0,t.OFFER_SELECTED&&(this.offerNum=parseInt(t.OFFER_SELECTED,10)),isNaN(this.offerNum)&&(this.offerNum=0),t.TREE_PROPS&&(this.treeProps=t.TREE_PROPS),t.DEFAULT_PICTURE&&(this.defaultPict.pict=t.DEFAULT_PICTURE.PICTURE,this.defaultPict.secondPict=t.DEFAULT_PICTURE.PICTURE_SECOND));break;default:this.errorCode=-1}t.BASKET&&"object"==typeof t.BASKET&&(t.BASKET.QUANTITY&&(this.basketData.quantity=t.BASKET.QUANTITY),t.BASKET.PROPS&&(this.basketData.props=t.BASKET.PROPS),t.BASKET.BASKET_URL&&(this.basketData.basketUrl=t.BASKET.BASKET_URL),3===this.productType&&t.BASKET.SKU_PROPS&&(this.basketData.sku_props=t.BASKET.SKU_PROPS),t.BASKET.ADD_URL_TEMPLATE&&(this.basketData.add_url=t.BASKET.ADD_URL_TEMPLATE),t.BASKET.BUY_URL_TEMPLATE&&(this.basketData.buy_url=t.BASKET.BUY_URL_TEMPLATE),""===this.basketData.add_url&&""===this.basketData.buy_url&&(this.errorCode=-1024)),this.useCompare&&(t.COMPARE&&"object"==typeof t.COMPARE?(t.COMPARE.COMPARE_PATH&&(this.compareData.comparePath=t.COMPARE.COMPARE_PATH),t.COMPARE.COMPARE_URL_TEMPLATE?this.compareData.compareUrl=t.COMPARE.COMPARE_URL_TEMPLATE:this.useCompare=!1,t.COMPARE.COMPARE_DELETE_URL_TEMPLATE?this.compareData.compareDeleteUrl=t.COMPARE.COMPARE_DELETE_URL_TEMPLATE:this.useCompare=!1):this.useCompare=!1)}0===this.errorCode&&BX.ready(BX.delegate(this.init,this))},t.JCCatalogItem.prototype={init:function(){var t=0,e=null;if(this.obProduct=BX(this.visual.ID),this.obProduct||(this.errorCode=-1),this.obPict=BX(this.visual.PICT_ID),this.obPict||(this.errorCode=-2),this.secondPict&&this.visual.SECOND_PICT_ID&&(this.obSecondPict=BX(this.visual.SECOND_PICT_ID)),this.obPictSlider=BX(this.visual.PICT_SLIDER_ID),this.obPictSliderIndicator=BX(this.visual.PICT_SLIDER_ID+"_indicator"),this.obPictSliderProgressBar=BX(this.visual.PICT_SLIDER_ID+"_progress_bar"),this.obPictSlider||(this.errorCode=-4),this.obPrice=BX(this.visual.PRICE_ID),this.obPriceOld=BX(this.visual.PRICE_OLD_ID),this.obPriceTotal=BX(this.visual.PRICE_TOTAL_ID),this.obPrice||(this.errorCode=-16),this.showQuantity&&this.visual.QUANTITY_ID&&(this.obQuantity=BX(this.visual.QUANTITY_ID),this.blockNodes.quantity=this.obProduct.querySelector('[data-entity="quantity-block"]'),this.isTouchDevice||(BX.bind(this.obQuantity,"focus",BX.proxy(this.onFocus,this)),BX.bind(this.obQuantity,"blur",BX.proxy(this.onBlur,this))),this.visual.QUANTITY_UP_ID&&(this.obQuantityUp=BX(this.visual.QUANTITY_UP_ID)),this.visual.QUANTITY_DOWN_ID&&(this.obQuantityDown=BX(this.visual.QUANTITY_DOWN_ID))),this.visual.QUANTITY_LIMIT&&"N"!==this.showMaxQuantity&&(this.obQuantityLimit.all=BX(this.visual.QUANTITY_LIMIT),this.obQuantityLimit.all&&(this.obQuantityLimit.value=this.obQuantityLimit.all.querySelector('[data-entity="quantity-limit-value"]'),this.obQuantityLimit.value||(this.obQuantityLimit.all=null))),3===this.productType&&this.fullDisplayMode&&(this.visual.TREE_ID&&(this.obTree=BX(this.visual.TREE_ID),this.obTree||(this.errorCode=-256)),this.visual.QUANTITY_MEASURE&&(this.obMeasure=BX(this.visual.QUANTITY_MEASURE))),this.obBasketActions=BX(this.visual.BASKET_ACTIONS_ID),this.obBasketActions&&this.visual.BUY_ID&&(this.obBuyBtn=BX(this.visual.BUY_ID)),this.obNotAvail=BX(this.visual.NOT_AVAILABLE_MESS),this.showSubscription&&(this.obSubscribe=BX(this.visual.SUBSCRIBE_ID)),this.showPercent&&(this.visual.DSC_PERC&&(this.obDscPerc=BX(this.visual.DSC_PERC)),this.secondPict&&this.visual.SECOND_DSC_PERC&&(this.obSecondDscPerc=BX(this.visual.SECOND_DSC_PERC))),this.showSkuProps&&this.visual.DISPLAY_PROP_DIV&&(this.obSkuProps=BX(this.visual.DISPLAY_PROP_DIV)),0===this.errorCode){if(this.isTouchDevice?(BX.bind(this.obPictSlider,"touchstart",BX.proxy(this.touchStartEvent,this)),BX.bind(this.obPictSlider,"touchend",BX.proxy(this.touchEndEvent,this)),BX.bind(this.obPictSlider,"touchcancel",BX.proxy(this.touchEndEvent,this))):("CARD"===this.viewMode&&(BX.bind(this.obProduct,"mouseenter",BX.proxy(this.hoverOn,this)),BX.bind(this.obProduct,"mouseleave",BX.proxy(this.hoverOff,this))),BX.bind(this.obProduct,"mouseenter",BX.proxy(this.cycleSlider,this)),BX.bind(this.obProduct,"mouseleave",BX.proxy(this.stopSlider,this))),this.bigData){var i=BX.findChildren(this.obProduct,{tag:"a"},!0);if(i)for(t in i)i.hasOwnProperty(t)&&i[t].getAttribute("href")==this.product.DETAIL_PAGE_URL&&BX.bind(i[t],"click",BX.proxy(this.rememberProductRecommendation,this))}if(this.showQuantity){var s=this.isTouchDevice?"touchstart":"mousedown",o=this.isTouchDevice?"touchend":"mouseup";this.obQuantityUp&&(BX.bind(this.obQuantityUp,s,BX.proxy(this.startQuantityInterval,this)),BX.bind(this.obQuantityUp,o,BX.proxy(this.clearQuantityInterval,this)),BX.bind(this.obQuantityUp,"mouseout",BX.proxy(this.clearQuantityInterval,this)),BX.bind(this.obQuantityUp,"click",BX.delegate(this.quantityUp,this))),this.obQuantityDown&&(BX.bind(this.obQuantityDown,s,BX.proxy(this.startQuantityInterval,this)),BX.bind(this.obQuantityDown,o,BX.proxy(this.clearQuantityInterval,this)),BX.bind(this.obQuantityDown,"mouseout",BX.proxy(this.clearQuantityInterval,this)),BX.bind(this.obQuantityDown,"click",BX.delegate(this.quantityDown,this))),this.obQuantity&&BX.bind(this.obQuantity,"change",BX.delegate(this.quantityChange,this))}switch(this.productType){case 0:case 1:case 2:parseInt(this.product.morePhotoCount)>1&&this.obPictSlider&&this.initializeSlider(),this.checkQuantityControls();break;case 3:if(this.offers.length>0){if((e=BX.findChildren(this.obTree,{tagName:"li"},!0))&&e.length)for(t=0;t<e.length;t++)BX.bind(e[t],"click",BX.delegate(this.selectOfferProp,this));this.setCurrent()}else parseInt(this.product.morePhotoCount)>1&&this.obPictSlider&&this.initializeSlider()}this.obBuyBtn&&("ADD"===this.basketAction?BX.bind(this.obBuyBtn,"click",BX.proxy(this.add2Basket,this)):BX.bind(this.obBuyBtn,"click",BX.proxy(this.buyBasket,this))),this.useCompare&&(this.obCompare=BX(this.visual.COMPARE_LINK_ID),this.obCompare&&BX.bind(this.obCompare,"click",BX.proxy(this.compare,this)),BX.addCustomEvent("onCatalogDeleteCompare",BX.proxy(this.checkDeletedCompare,this)))}},setAnalyticsDataLayer:function(e){if(this.useEnhancedEcommerce&&this.dataLayerName){var i,s,o,a,r,n,h={},l={},c=[];switch(this.productType){case 0:case 1:case 2:h={id:this.product.id,name:this.product.name,price:this.currentPrices[this.currentPriceSelected]&&this.currentPrices[this.currentPriceSelected].PRICE,brand:BX.type.isArray(this.brandProperty)?this.brandProperty.join("/"):this.brandProperty};break;case 3:for(i in this.offers[this.offerNum].TREE)if(this.offers[this.offerNum].TREE.hasOwnProperty(i))for(s in a=i.substring(5),r=this.offers[this.offerNum].TREE[i],this.treeProps)if(this.treeProps.hasOwnProperty(s)&&this.treeProps[s].ID==a)for(o in this.treeProps[s].VALUES)if((n=this.treeProps[s].VALUES[o]).ID==r){c.push(n.NAME);break}h={id:this.offers[this.offerNum].ID,name:this.offers[this.offerNum].NAME,price:this.currentPrices[this.currentPriceSelected]&&this.currentPrices[this.currentPriceSelected].PRICE,brand:BX.type.isArray(this.brandProperty)?this.brandProperty.join("/"):this.brandProperty,variant:c.join("/")}}switch(e){case"addToCart":l={event:"addToCart",ecommerce:{currencyCode:this.currentPrices[this.currentPriceSelected]&&this.currentPrices[this.currentPriceSelected].CURRENCY||"",add:{products:[{name:h.name||"",id:h.id||"",price:h.price||0,brand:h.brand||"",category:h.category||"",variant:h.variant||"",quantity:this.showQuantity&&this.obQuantity?this.obQuantity.value:1}]}}}}t[this.dataLayerName]=t[this.dataLayerName]||[],t[this.dataLayerName].push(l)}},hoverOn:function(t){clearTimeout(this.hoverTimer),this.obProduct.style.height=getComputedStyle(this.obProduct).height,BX.addClass(this.obProduct,"hover"),BX.PreventDefault(t)},hoverOff:function(t){this.hoverStateChangeForbidden||(BX.removeClass(this.obProduct,"hover"),this.hoverTimer=setTimeout(BX.delegate(function(){this.obProduct.style.height="auto"},this),300),BX.PreventDefault(t))},onFocus:function(){this.hoverStateChangeForbidden=!0,BX.bind(document,"mousemove",BX.proxy(this.captureMousePosition,this))},onBlur:function(){this.hoverStateChangeForbidden=!1,BX.unbind(document,"mousemove",BX.proxy(this.captureMousePosition,this));var t=document.elementFromPoint(this.mouseX,this.mouseY);t&&this.obProduct.contains(t)||this.hoverOff()},captureMousePosition:function(t){this.mouseX=t.clientX,this.mouseY=t.clientY},getCookie:function(t){var e=document.cookie.match(new RegExp("(?:^|; )"+t.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},rememberProductRecommendation:function(){var t,e=BX.cookie_prefix+"_RCM_PRODUCT_LOG",i=this.getCookie(e),s=!1,o=[];i&&(o=i.split("."));for(var a=o.length;a--;)(t=o[a].split("-"))[0]==this.product.id?((t=o[a].split("-"))[1]=this.product.rcmId,t[2]=BX.current_server_time,o[a]=t.join("-"),s=!0):BX.current_server_time-t[2]>2592e3&&o.splice(a,1);s||o.push([this.product.id,this.product.rcmId,BX.current_server_time].join("-"));var r=o.join("."),n=new Date((new Date).getTime()+31536e7).toUTCString();document.cookie=e+"="+r+"; path=/; expires="+n+"; domain="+BX.cookie_domain},startQuantityInterval:function(){var t=BX.proxy_context.id===this.visual.QUANTITY_DOWN_ID?BX.proxy(this.quantityDown,this):BX.proxy(this.quantityUp,this);this.quantityDelay=setTimeout(BX.delegate(function(){this.quantityTimer=setInterval(t,150)},this),300)},clearQuantityInterval:function(){clearTimeout(this.quantityDelay),clearInterval(this.quantityTimer)},quantityUp:function(){var t=0,e=!0;0===this.errorCode&&this.showQuantity&&this.canBuy&&(t=this.isDblQuantity?parseFloat(this.obQuantity.value):parseInt(this.obQuantity.value,10),isNaN(t)||(t+=this.stepQuantity,this.checkQuantity&&t>this.maxQuantity&&(e=!1),e&&(this.isDblQuantity&&(t=Math.round(t*this.precisionFactor)/this.precisionFactor),this.obQuantity.value=t,this.setPrice())))},quantityDown:function(){var t=0,e=!0;0===this.errorCode&&this.showQuantity&&this.canBuy&&(t=this.isDblQuantity?parseFloat(this.obQuantity.value):parseInt(this.obQuantity.value,10),isNaN(t)||(t-=this.stepQuantity,this.checkPriceRange(t),t<this.minQuantity&&(e=!1),e&&(this.isDblQuantity&&(t=Math.round(t*this.precisionFactor)/this.precisionFactor),this.obQuantity.value=t,this.setPrice())))},quantityChange:function(){var t,e=0;0===this.errorCode&&this.showQuantity&&(this.canBuy?(e=this.isDblQuantity?parseFloat(this.obQuantity.value):Math.round(this.obQuantity.value),isNaN(e)?this.obQuantity.value=this.minQuantity:(this.checkQuantity&&e>this.maxQuantity&&(e=this.maxQuantity),this.checkPriceRange(e),e<this.minQuantity?e=this.minQuantity:(e=(t=Math.round(Math.round(e*this.precisionFactor/this.stepQuantity)/this.precisionFactor)||1)<=1?this.stepQuantity:t*this.stepQuantity,e=Math.round(e*this.precisionFactor)/this.precisionFactor),this.obQuantity.value=e)):this.obQuantity.value=this.minQuantity,this.setPrice())},quantitySet:function(t){var e,i,s=this.offers[t],o=this.offers[this.offerNum];if(0===this.errorCode){if(this.canBuy=s.CAN_BUY,this.currentPriceMode=s.ITEM_PRICE_MODE,this.currentPrices=s.ITEM_PRICES,this.currentPriceSelected=s.ITEM_PRICE_SELECTED,this.currentQuantityRanges=s.ITEM_QUANTITY_RANGES,this.currentQuantityRangeSelected=s.ITEM_QUANTITY_RANGE_SELECTED,this.canBuy?(this.blockNodes.quantity&&BX.style(this.blockNodes.quantity,"display",""),this.obBasketActions&&BX.style(this.obBasketActions,"display",""),this.obNotAvail&&BX.style(this.obNotAvail,"display","none"),this.obSubscribe&&BX.style(this.obSubscribe,"display","none")):(this.blockNodes.quantity&&BX.style(this.blockNodes.quantity,"display","none"),this.obBasketActions&&BX.style(this.obBasketActions,"display","none"),this.obNotAvail&&BX.style(this.obNotAvail,"display",""),this.obSubscribe&&("Y"===s.CATALOG_SUBSCRIBE?(BX.style(this.obSubscribe,"display",""),this.obSubscribe.setAttribute("data-item",s.ID),BX(this.visual.SUBSCRIBE_ID+"_hidden").click()):BX.style(this.obSubscribe,"display","none"))),this.isDblQuantity=s.QUANTITY_FLOAT,this.checkQuantity=s.CHECK_QUANTITY,this.isDblQuantity?(this.stepQuantity=Math.round(parseFloat(s.STEP_QUANTITY)*this.precisionFactor)/this.precisionFactor,this.maxQuantity=parseFloat(s.MAX_QUANTITY),this.minQuantity="Q"===this.currentPriceMode?parseFloat(this.currentPrices[this.currentPriceSelected].MIN_QUANTITY):this.stepQuantity):(this.stepQuantity=parseInt(s.STEP_QUANTITY,10),this.maxQuantity=parseInt(s.MAX_QUANTITY,10),this.minQuantity="Q"===this.currentPriceMode?parseInt(this.currentPrices[this.currentPriceSelected].MIN_QUANTITY):this.stepQuantity),this.showQuantity){var a=o.ITEM_PRICES.length&&o.ITEM_PRICES[o.ITEM_PRICE_SELECTED]&&o.ITEM_PRICES[o.ITEM_PRICE_SELECTED].MIN_QUANTITY!=this.minQuantity;e=this.isDblQuantity?Math.round(parseFloat(o.STEP_QUANTITY)*this.precisionFactor)/this.precisionFactor!==this.stepQuantity||a||o.MEASURE!==s.MEASURE||this.checkQuantity&&parseFloat(o.MAX_QUANTITY)>this.maxQuantity&&parseFloat(this.obQuantity.value)>this.maxQuantity:parseInt(o.STEP_QUANTITY,10)!==this.stepQuantity||a||o.MEASURE!==s.MEASURE||this.checkQuantity&&parseInt(o.MAX_QUANTITY,10)>this.maxQuantity&&parseInt(this.obQuantity.value,10)>this.maxQuantity,this.obQuantity.disabled=!this.canBuy,e&&(this.obQuantity.value=this.minQuantity),this.obMeasure&&(s.MEASURE?BX.adjust(this.obMeasure,{html:s.MEASURE}):BX.adjust(this.obMeasure,{html:""}))}this.obQuantityLimit.all&&(this.checkQuantity&&0!=this.maxQuantity?("M"===this.showMaxQuantity?i=this.maxQuantity/this.stepQuantity>=this.relativeQuantityFactor?BX.message("RELATIVE_QUANTITY_MANY"):BX.message("RELATIVE_QUANTITY_FEW"):(i=this.maxQuantity,s.MEASURE&&(i+=" "+s.MEASURE)),BX.adjust(this.obQuantityLimit.value,{html:i}),BX.adjust(this.obQuantityLimit.all,{style:{display:""}})):(BX.adjust(this.obQuantityLimit.value,{html:""}),BX.adjust(this.obQuantityLimit.all,{style:{display:"none"}})))}},initializeSlider:function(){var t=this.obPictSlider.getAttribute("data-slider-wrap");if(this.slider.options.wrap=t?"true"===t:this.defaultSliderOptions.wrap,this.isTouchDevice)this.slider.options.interval=!1;else{if(this.slider.options.interval=parseInt(this.obPictSlider.getAttribute("data-slider-interval"))||this.defaultSliderOptions.interval,this.slider.options.interval<700&&(this.slider.options.interval=700),this.obPictSliderIndicator){var e=this.obPictSliderIndicator.querySelectorAll("[data-go-to]");for(var i in e)e.hasOwnProperty(i)&&BX.bind(e[i],"click",BX.proxy(this.sliderClickHandler,this))}this.obPictSliderProgressBar&&(this.slider.progress?(this.resetProgress(),this.cycleSlider()):this.slider.progress=new BX.easing({transition:BX.easing.transitions.linear,step:BX.delegate(function(t){this.obPictSliderProgressBar.style.width=t.width/10+"%"},this)}))}},checkTouch:function(t){return!(!t||!t.changedTouches)&&t.changedTouches[0].identifier===this.touch.identifier},touchStartEvent:function(t){1==t.touches.length&&(this.touch=t.changedTouches[0])},touchEndEvent:function(t){if(this.checkTouch(t)){var e=this.touch.pageX-t.changedTouches[0].pageX,i=this.touch.pageY-t.changedTouches[0].pageY;Math.abs(e)>=Math.abs(i)+10&&(e>0&&this.slideNext(),e<0&&this.slidePrev())}},sliderClickHandler:function(t){var e=BX.getEventTarget(t).getAttribute("data-go-to");e&&this.slideTo(e),BX.PreventDefault(t)},slideNext:function(){if(!this.slider.sliding)return this.slide("next")},slidePrev:function(){if(!this.slider.sliding)return this.slide("prev")},slideTo:function(t){this.slider.active=BX.findChild(this.obPictSlider,{className:"item active"},!0,!1),this.slider.progress&&(this.slider.interval=!0);var e=this.getItemIndex(this.slider.active);if(!(t>this.slider.items.length-1||t<0))return!this.slider.sliding&&(e==t?(this.stopSlider(),void this.cycleSlider()):this.slide(t>e?"next":"prev",this.eq(this.slider.items,t)))},slide:function(t,e){var i=BX.findChild(this.obPictSlider,{className:"item active"},!0,!1),s=this.slider.interval,o="next"===t?"left":"right";if(e=e||this.getItemForDirection(t,i),BX.hasClass(e,"active"))return this.slider.sliding=!1;if(this.slider.sliding=!0,s&&this.stopSlider(),this.obPictSliderIndicator){BX.removeClass(this.obPictSliderIndicator.querySelector(".active"),"active");var a=this.obPictSliderIndicator.querySelectorAll("[data-go-to]")[this.getItemIndex(e)];a&&BX.addClass(a,"active")}if(BX.hasClass(this.obPictSlider,"slide")&&!BX.browser.IsIE()){var r=this;BX.addClass(e,t),e.offsetWidth,BX.addClass(i,o),BX.addClass(e,o),setTimeout(function(){BX.addClass(e,"active"),BX.removeClass(i,"active"),BX.removeClass(i,o),BX.removeClass(e,t),BX.removeClass(e,o),r.slider.sliding=!1},700)}else BX.addClass(e,"active"),this.slider.sliding=!1;this.obPictSliderProgressBar&&this.resetProgress(),s&&this.cycleSlider()},stopSlider:function(t){if(t||(this.slider.paused=!0),this.slider.interval&&clearInterval(this.slider.interval),this.slider.progress){this.slider.progress.stop();var e=parseInt(this.obPictSliderProgressBar.style.width);this.slider.progress.options.duration=this.slider.options.interval*e/200,this.slider.progress.options.start={width:10*e},this.slider.progress.options.finish={width:0},this.slider.progress.options.complete=null,this.slider.progress.animate()}},cycleSlider:function(t){if(t||(this.slider.paused=!1),this.slider.interval&&clearInterval(this.slider.interval),this.slider.options.interval&&!this.slider.paused)if(this.slider.progress){this.slider.progress.stop();var e=parseInt(this.obPictSliderProgressBar.style.width);this.slider.progress.options.duration=this.slider.options.interval*(100-e)/100,this.slider.progress.options.start={width:10*e},this.slider.progress.options.finish={width:1e3},this.slider.progress.options.complete=BX.delegate(function(){this.slider.interval=!0,this.slideNext()},this),this.slider.progress.animate()}else this.slider.interval=setInterval(BX.proxy(this.slideNext,this),this.slider.options.interval)},resetProgress:function(){this.slider.progress&&this.slider.progress.stop(),this.obPictSliderProgressBar.style.width=0},getItemForDirection:function(t,e){var i=this.getItemIndex(e);if(("prev"===t&&0===i||"next"===t&&i==this.slider.items.length-1)&&!this.slider.options.wrap)return e;var s=(i+("prev"===t?-1:1))%this.slider.items.length;return this.eq(this.slider.items,s)},getItemIndex:function(t){return this.slider.items=BX.findChildren(t.parentNode,{className:"item"},!0),this.slider.items.indexOf(t||this.slider.active)},eq:function(t,e){var i=t.length,s=+e+(e<0?i:0);return s>=0&&s<i?t[s]:{}},selectOfferProp:function(){var t=0,e=[],i=null,s=BX.proxy_context;if(s&&s.hasAttribute("data-treevalue")){if(BX.hasClass(s,"selected"))return;if(e=s.getAttribute("data-treevalue").split("_"),this.searchOfferPropIndex(e[0],e[1])&&(i=BX.findChildren(s.parentNode,{tagName:"li"},!1))&&0<i.length)for(t=0;t<i.length;t++)i[t].getAttribute("data-onevalue")===e[1]?BX.addClass(i[t],"selected"):BX.removeClass(i[t],"selected")}},searchOfferPropIndex:function(t,e){var i,s,o="",a=!1,r=[],n=[],h=-1,l={},c=[];for(i=0;i<this.treeProps.length;i++)if(this.treeProps[i].ID===t){h=i;break}if(-1<h){for(i=0;i<h;i++)l[o="PROP_"+this.treeProps[i].ID]=this.selectedValues[o];if(o="PROP_"+this.treeProps[h].ID,!(a=this.getRowValues(l,o)))return!1;if(!BX.util.in_array(e,a))return!1;for(l[o]=e,i=h+1;i<this.treeProps.length;i++){if(o="PROP_"+this.treeProps[i].ID,!(a=this.getRowValues(l,o)))return!1;if(n=[],this.showAbsent)for(r=[],c=[],c=BX.clone(l,!0),s=0;s<a.length;s++)c[o]=a[s],n[n.length]=a[s],this.getCanBuy(c)&&(r[r.length]=a[s]);else r=a;this.selectedValues[o]&&BX.util.in_array(this.selectedValues[o],r)?l[o]=this.selectedValues[o]:this.showAbsent?l[o]=r.length>0?r[0]:n[0]:l[o]=r[0],this.updateRow(i,l[o],a,r)}this.selectedValues=l,this.changeInfo()}return!0},updateRow:function(t,e,i,s){var o,a=0,r="",n=!1,h=null,l=this.obTree.querySelectorAll('[data-entity="sku-line-block"]');if(t>-1&&t<l.length&&(o=l[t].querySelector("ul"),(h=BX.findChildren(o,{tagName:"li"},!1))&&0<h.length))for(a=0;a<h.length;a++)(n=(r=h[a].getAttribute("data-onevalue"))===e)?BX.addClass(h[a],"selected"):BX.removeClass(h[a],"selected"),BX.util.in_array(r,s)?BX.removeClass(h[a],"notallowed"):BX.addClass(h[a],"notallowed"),h[a].style.display=BX.util.in_array(r,i)?"":"none",n&&(l[t].style.display=0==r&&1==s.length?"none":"")},getRowValues:function(t,e){var i,s=0,o=[],a=!1,r=!0;if(0===t.length){for(s=0;s<this.offers.length;s++)BX.util.in_array(this.offers[s].TREE[e],o)||(o[o.length]=this.offers[s].TREE[e]);a=!0}else for(s=0;s<this.offers.length;s++){for(i in r=!0,t)if(t[i]!==this.offers[s].TREE[i]){r=!1;break}r&&(BX.util.in_array(this.offers[s].TREE[e],o)||(o[o.length]=this.offers[s].TREE[e]),a=!0)}return!!a&&o},getCanBuy:function(t){var e,i,s=!1,o=!0;for(e=0;e<this.offers.length;e++){for(i in o=!0,t)if(t[i]!==this.offers[e].TREE[i]){o=!1;break}if(o&&this.offers[e].CAN_BUY){s=!0;break}}return s},setCurrent:function(){var t,e=0,i=[],s="",o=!1,a={},r=[],n=this.offers[this.offerNum].TREE;for(t=0;t<this.treeProps.length&&(s="PROP_"+this.treeProps[t].ID,o=this.getRowValues(a,s));t++){if(BX.util.in_array(n[s],o)?a[s]=n[s]:(a[s]=o[0],this.offerNum=0),this.showAbsent)for(i=[],r=[],r=BX.clone(a,!0),e=0;e<o.length;e++)r[s]=o[e],this.getCanBuy(r)&&(i[i.length]=o[e]);else i=o;this.updateRow(t,a[s],o,i)}this.selectedValues=a,this.changeInfo()},changeInfo:function(){var t,e,i=-1,s=!0;for(t=0;t<this.offers.length;t++){for(e in s=!0,this.selectedValues)if(this.selectedValues[e]!==this.offers[t].TREE[e]){s=!1;break}if(s){i=t;break}}if(i>-1){if(parseInt(this.offers[i].MORE_PHOTO_COUNT)>1&&this.obPictSlider){for(t in this.obPict&&(this.obPict.style.display="none"),this.obSecondPict&&(this.obSecondPict.style.display="none"),BX.cleanNode(this.obPictSlider),this.offers[i].MORE_PHOTO)this.offers[i].MORE_PHOTO.hasOwnProperty(t)&&this.obPictSlider.appendChild(BX.create("SPAN",{props:{className:"product-item-image-slide item"+(0==t?" active":"")},style:{backgroundImage:"url('"+this.offers[i].MORE_PHOTO[t].SRC+"')"}}));if(this.obPictSliderIndicator){for(t in BX.cleanNode(this.obPictSliderIndicator),this.offers[i].MORE_PHOTO)this.offers[i].MORE_PHOTO.hasOwnProperty(t)&&(this.obPictSliderIndicator.appendChild(BX.create("DIV",{attrs:{"data-go-to":t},props:{className:"product-item-image-slider-control"+(0==t?" active":"")}})),this.obPictSliderIndicator.appendChild(document.createTextNode(" ")));this.obPictSliderIndicator.style.display=""}this.obPictSliderProgressBar&&(this.obPictSliderProgressBar.style.display=""),this.obPictSlider.style.display="",this.initializeSlider()}else this.obPictSlider&&(this.obPictSlider.style.display="none"),this.obPictSliderIndicator&&(this.obPictSliderIndicator.style.display="none"),this.obPictSliderProgressBar&&(this.obPictSliderProgressBar.style.display="none"),this.obPict&&(this.offers[i].PREVIEW_PICTURE?BX.adjust(this.obPict,{style:{backgroundImage:"url('"+this.offers[i].PREVIEW_PICTURE.SRC+"')"}}):BX.adjust(this.obPict,{style:{backgroundImage:"url('"+this.defaultPict.pict.SRC+"')"}}),this.obPict.style.display=""),this.secondPict&&this.obSecondPict&&(this.offers[i].PREVIEW_PICTURE_SECOND?BX.adjust(this.obSecondPict,{style:{backgroundImage:"url('"+this.offers[i].PREVIEW_PICTURE_SECOND.SRC+"')"}}):this.offers[i].PREVIEW_PICTURE.SRC?BX.adjust(this.obSecondPict,{style:{backgroundImage:"url('"+this.offers[i].PREVIEW_PICTURE.SRC+"')"}}):this.defaultPict.secondPict?BX.adjust(this.obSecondPict,{style:{backgroundImage:"url('"+this.defaultPict.secondPict.SRC+"')"}}):BX.adjust(this.obSecondPict,{style:{backgroundImage:"url('"+this.defaultPict.pict.SRC+"')"}}),this.obSecondPict.style.display="");this.showSkuProps&&this.obSkuProps&&(this.offers[i].DISPLAY_PROPERTIES.length?BX.adjust(this.obSkuProps,{style:{display:""},html:this.offers[i].DISPLAY_PROPERTIES}):BX.adjust(this.obSkuProps,{style:{display:"none"},html:""})),this.quantitySet(i),this.setPrice(),this.setCompared(this.offers[i].COMPARED),this.offerNum=i}},checkPriceRange:function(t){if(void 0!==t&&"Q"==this.currentPriceMode){var e,i=!1;for(var s in this.currentQuantityRanges)if(this.currentQuantityRanges.hasOwnProperty(s)&&(e=this.currentQuantityRanges[s],parseInt(t)>=parseInt(e.SORT_FROM)&&("INF"==e.SORT_TO||parseInt(t)<=parseInt(e.SORT_TO)))){i=!0,this.currentQuantityRangeSelected=e.HASH;break}for(var o in!i&&(e=this.getMinPriceRange())&&(this.currentQuantityRangeSelected=e.HASH),this.currentPrices)if(this.currentPrices.hasOwnProperty(o)&&this.currentPrices[o].QUANTITY_HASH==this.currentQuantityRangeSelected){this.currentPriceSelected=o;break}}},getMinPriceRange:function(){var t;for(var e in this.currentQuantityRanges)this.currentQuantityRanges.hasOwnProperty(e)&&(!t||parseInt(this.currentQuantityRanges[e].SORT_FROM)<parseInt(t.SORT_FROM))&&(t=this.currentQuantityRanges[e]);return t},checkQuantityControls:function(){if(this.obQuantity){var t=this.checkQuantity&&parseFloat(this.obQuantity.value)+this.stepQuantity>this.maxQuantity,e=parseFloat(this.obQuantity.value)-this.stepQuantity<this.minQuantity;t?BX.addClass(this.obQuantityUp,"product-item-amount-field-btn-disabled"):BX.hasClass(this.obQuantityUp,"product-item-amount-field-btn-disabled")&&BX.removeClass(this.obQuantityUp,"product-item-amount-field-btn-disabled"),e?BX.addClass(this.obQuantityDown,"product-item-amount-field-btn-disabled"):BX.hasClass(this.obQuantityDown,"product-item-amount-field-btn-disabled")&&BX.removeClass(this.obQuantityDown,"product-item-amount-field-btn-disabled"),t&&e?this.obQuantity.setAttribute("disabled","disabled"):this.obQuantity.removeAttribute("disabled")}},setPrice:function(){var t,e;this.obQuantity&&this.checkPriceRange(this.obQuantity.value),this.checkQuantityControls(),e=this.currentPrices[this.currentPriceSelected],this.obPrice&&(e?BX.adjust(this.obPrice,{html:BX.Currency.currencyFormat(e.RATIO_PRICE,e.CURRENCY,!0)}):BX.adjust(this.obPrice,{html:""}),this.showOldPrice&&this.obPriceOld&&(e&&e.RATIO_PRICE!==e.RATIO_BASE_PRICE?BX.adjust(this.obPriceOld,{style:{display:""},html:BX.Currency.currencyFormat(e.RATIO_BASE_PRICE,e.CURRENCY,!0)}):BX.adjust(this.obPriceOld,{style:{display:"none"},html:""})),this.obPriceTotal&&(e&&this.obQuantity&&this.obQuantity.value!=this.stepQuantity?BX.adjust(this.obPriceTotal,{html:BX.message("PRICE_TOTAL_PREFIX")+" <strong>"+BX.Currency.currencyFormat(e.PRICE*this.obQuantity.value,e.CURRENCY,!0)+"</strong>",style:{display:""}}):BX.adjust(this.obPriceTotal,{html:"",style:{display:"none"}})),this.showPercent&&(t=e&&parseInt(e.DISCOUNT)>0?{style:{display:""},html:-e.PERCENT+"%"}:{style:{display:"none"},html:""},this.obDscPerc&&BX.adjust(this.obDscPerc,t),this.obSecondDscPerc&&BX.adjust(this.obSecondDscPerc,t)))},compare:function(t){var e=this.obCompare.querySelector('[data-entity="compare-checkbox"]'),i=BX.getEventTarget(t),s=!0;e&&(s=i===e?e.checked:!e.checked);var o,a=s?this.compareData.compareUrl:this.compareData.compareDeleteUrl;if(a){switch(i!==e&&(BX.PreventDefault(t),this.setCompared(s)),this.productType){case 0:case 1:case 2:o=a.replace("#ID#",this.product.id.toString());break;case 3:o=a.replace("#ID#",this.offers[this.offerNum].ID)}BX.ajax({method:"POST",dataType:s?"json":"html",url:o+(-1!==o.indexOf("?")?"&":"?")+"ajax_action=Y",onsuccess:s?BX.proxy(this.compareResult,this):BX.proxy(this.compareDeleteResult,this)})}},compareResult:function(t){var i,s;this.obPopupWin&&this.obPopupWin.close(),BX.type.isPlainObject(t)&&(this.initPopupWindow(),this.offers.length>0&&(this.offers[this.offerNum].COMPARED="OK"===t.STATUS),"OK"===t.STATUS?(BX.onCustomEvent("OnCompareChange"),i='<div style="width: 100%; margin: 0; text-align: center;"><p>'+BX.message("COMPARE_MESSAGE_OK")+"</p></div>",s=this.showClosePopup?[new e({text:BX.message("BTN_MESSAGE_COMPARE_REDIRECT"),events:{click:BX.delegate(this.compareRedirect,this)},style:{marginRight:"10px"}}),new e({text:BX.message("BTN_MESSAGE_CLOSE_POPUP"),events:{click:BX.delegate(this.obPopupWin.close,this.obPopupWin)}})]:[new e({text:BX.message("BTN_MESSAGE_COMPARE_REDIRECT"),events:{click:BX.delegate(this.compareRedirect,this)}})]):(i='<div style="width: 100%; margin: 0; text-align: center;"><p>'+(t.MESSAGE?t.MESSAGE:BX.message("COMPARE_UNKNOWN_ERROR"))+"</p></div>",s=[new e({text:BX.message("BTN_MESSAGE_CLOSE"),events:{click:BX.delegate(this.obPopupWin.close,this.obPopupWin)}})]),this.obPopupWin.setTitleBar(BX.message("COMPARE_TITLE")),this.obPopupWin.setContent(i),this.obPopupWin.setButtons(s),this.obPopupWin.show())},compareDeleteResult:function(){BX.onCustomEvent("OnCompareChange"),this.offers&&this.offers.length&&(this.offers[this.offerNum].COMPARED=!1)},setCompared:function(t){if(this.obCompare){var e=this.obCompare.querySelector('[data-entity="compare-checkbox"]');e&&(e.checked=t)}},setCompareInfo:function(t){if(BX.type.isArray(t))for(var e in this.offers)this.offers.hasOwnProperty(e)&&(this.offers[e].COMPARED=BX.util.in_array(this.offers[e].ID,t))},compareRedirect:function(){this.compareData.comparePath?location.href=this.compareData.comparePath:this.obPopupWin.close()},checkDeletedCompare:function(t){switch(this.productType){case 0:case 1:case 2:this.product.id==t&&this.setCompared(!1);break;case 3:for(var e=this.offers.length;e--;)if(this.offers[e].ID==t){this.offers[e].COMPARED=!1,this.offerNum==e&&this.setCompared(!1);break}}},initBasketUrl:function(){switch(this.basketUrl="ADD"===this.basketMode?this.basketData.add_url:this.basketData.buy_url,this.productType){case 1:case 2:this.basketUrl=this.basketUrl.replace("#ID#",this.product.id.toString());break;case 3:this.basketUrl=this.basketUrl.replace("#ID#",this.offers[this.offerNum].ID)}this.basketParams={ajax_basket:"Y"},this.showQuantity&&(this.basketParams[this.basketData.quantity]=this.obQuantity.value),this.basketData.sku_props&&(this.basketParams[this.basketData.sku_props_var]=this.basketData.sku_props)},fillBasketProps:function(){if(this.visual.BASKET_PROP_DIV){var t=0,e=null,i=!1,s=null;if(this.basketData.useProps&&!this.basketData.emptyProps?this.obPopupWin&&this.obPopupWin.contentContainer&&(s=this.obPopupWin.contentContainer):s=BX(this.visual.BASKET_PROP_DIV),s){if((e=s.getElementsByTagName("select"))&&e.length)for(t=0;t<e.length;t++)if(!e[t].disabled)switch(e[t].type.toLowerCase()){case"select-one":this.basketParams[e[t].name]=e[t].value,i=!0}if((e=s.getElementsByTagName("input"))&&e.length)for(t=0;t<e.length;t++)if(!e[t].disabled)switch(e[t].type.toLowerCase()){case"hidden":this.basketParams[e[t].name]=e[t].value,i=!0;break;case"radio":e[t].checked&&(this.basketParams[e[t].name]=e[t].value,i=!0)}}i||(this.basketParams[this.basketData.props]=[],this.basketParams[this.basketData.props][0]=0)}},add2Basket:function(){this.basketMode="ADD",this.basket()},buyBasket:function(){this.basketMode="BUY",this.basket()},sendToBasket:function(){this.canBuy&&(this.product&&this.product.id&&this.bigData&&this.rememberProductRecommendation(),this.initBasketUrl(),this.fillBasketProps(),BX.ajax({method:"POST",dataType:"json",url:this.basketUrl,data:this.basketParams,onsuccess:BX.proxy(this.basketResult,this)}))},basket:function(){var t="";if(this.canBuy)switch(this.productType){case 1:case 2:this.basketData.useProps&&!this.basketData.emptyProps?(this.initPopupWindow(),this.obPopupWin.setTitleBar(BX.message("TITLE_BASKET_PROPS")),BX(this.visual.BASKET_PROP_DIV)&&(t=BX(this.visual.BASKET_PROP_DIV).innerHTML),this.obPopupWin.setContent(t),this.obPopupWin.setButtons([new e({text:BX.message("BTN_MESSAGE_SEND_PROPS"),events:{click:BX.delegate(this.sendToBasket,this)}})]),this.obPopupWin.show()):this.sendToBasket();break;case 3:this.sendToBasket()}},basketResult:function(t){var i,s="",o="",a=[];if(this.obPopupWin&&this.obPopupWin.close(),BX.type.isPlainObject(t))if((i="OK"===t.STATUS)&&this.setAnalyticsDataLayer("addToCart"),i&&"BUY"===this.basketAction)this.basketRedirect();else{if(this.initPopupWindow(),i){switch(BX.onCustomEvent("OnBasketChange"),BX.findParent(this.obProduct,{className:"bx_sale_gift_main_products"},10)&&BX.onCustomEvent("onAddToBasketMainProduct",[this]),this.productType){case 1:case 2:o=this.product.pict.SRC;break;case 3:o=this.offers[this.offerNum].PREVIEW_PICTURE?this.offers[this.offerNum].PREVIEW_PICTURE.SRC:this.defaultPict.pict.SRC}s='<div style="width: 100%; margin: 0; text-align: center;"><img src="'+o+'" height="130" style="max-height:130px"><p>'+this.product.name+"</p></div>",a=this.showClosePopup?[new e({text:BX.message("BTN_MESSAGE_BASKET_REDIRECT"),events:{click:BX.delegate(this.basketRedirect,this)},style:{marginRight:"10px"}}),new e({text:BX.message("BTN_MESSAGE_CLOSE_POPUP"),events:{click:BX.delegate(this.obPopupWin.close,this.obPopupWin)}})]:[new e({text:BX.message("BTN_MESSAGE_BASKET_REDIRECT"),events:{click:BX.delegate(this.basketRedirect,this)}})]}else s='<div style="width: 100%; margin: 0; text-align: center;"><p>'+(t.MESSAGE?t.MESSAGE:BX.message("BASKET_UNKNOWN_ERROR"))+"</p></div>",a=[new e({text:BX.message("BTN_MESSAGE_CLOSE"),events:{click:BX.delegate(this.obPopupWin.close,this.obPopupWin)}})];this.obPopupWin.setTitleBar(i?BX.message("TITLE_SUCCESSFUL"):BX.message("TITLE_ERROR")),this.obPopupWin.setContent(s),this.obPopupWin.setButtons(a),this.obPopupWin.show()}},basketRedirect:function(){location.href=this.basketData.basketUrl?this.basketData.basketUrl:BX.message("BASKET_URL")},initPopupWindow:function(){this.obPopupWin||(this.obPopupWin=BX.PopupWindowManager.create("CatalogSectionBasket_"+this.visual.ID,null,{autoHide:!0,offsetLeft:0,offsetTop:0,overlay:!0,closeByEsc:!0,titleBar:!0,closeIcon:!0,contentColor:"white",className:this.templateTheme?"bx-"+this.templateTheme:""}))}}}}(window),$(document).ready(function(){let t=document.querySelectorAll(".index_blank .index_blank-table .table .offer-footer"),e=document.querySelectorAll(".offer-show-more-content .offer-show-more-content__btn"),i=document.querySelectorAll(".offer-properties-item-inner"),s=[];for(let e=0;e<t.length;e++)t[e].addEventListener("click",function(){let t=getParent(this,"index_blank-table-tbody");this.classList.contains("active")?(this.classList.remove("active"),t.querySelector(".offer-properties-hidden")&&(t.querySelector(".offer-properties-hidden").style.display="none")):this.classList.add("active")});for(let t=0;t<e.length;t++)e[t].addEventListener("click",function(){let t=getParent(this,"index_blank-table-tbody");this.classList.toggle("opened");for(let e=0;e<t.children.length;e++)t.children[e].classList.contains("offer-properties-hidden")&&("none"===window.getComputedStyle(t.children[e]).getPropertyValue("display")?t.children[e].style.display="table-row":t.children[e].style.display="none")});for(let t=0;t<i.length;t++){s[t]=i[t].querySelectorAll(".offer-properties-item-inner__item");for(let e=0;e<s[t].length;e++)s[t][e].addEventListener("click",function(){this.classList.toggle("active")})}}),window.onresize=function(t){$(window).width()<576?(ChangePhoneMobile(),ChangeCouponMobile(),titleChangeMobile()):(titleChangeDevice(),ChangePhoneDevice(),ChangeCouponAllDevice()),$(window).width()<992?ChangePriceMobile():ChangePriceDevice(),$(window).width()<768?(galleryMoreItems(2),ChangePhoneMobileDetail(),previewProductMobileNot()):(galleryMoreItems(5),ChangePhoneDeviceDetail()),$(window).width()>768&&(updateTopBar($topBar,$button,$visibleLinks,$hiddenLinks,responsiveBreaks),updateTopBar($topBar2,$button2,$visibleLinks2,$hiddenLinks2,responsiveBreaks2))},$(document).ready(function(){$(".hover").mouseleave(function(){$(this).removeClass("hover")}),$topBar=$(".category-main-menu"),$button=$(".category-main-menu .responsive-hidden-button"),$visibleLinks=$(".category-main-menu .visible-links"),$hiddenLinks=$(".category-main-menu .hidden-links"),responsiveBreaks=[],$topBar2=$(".category-menu"),$button2=$(".category-menu .responsive-hidden-button"),$visibleLinks2=$(".category-menu .visible-links"),$hiddenLinks2=$(".category-menu .hidden-links"),responsiveBreaks2=[],$button.on("click",function(){$hiddenLinks.toggleClass("hidden")}),$button2.on("click",function(){$hiddenLinks2.toggleClass("hidden")}),$(window).width()>768&&(updateTopBar($topBar,$button,$visibleLinks,$hiddenLinks,responsiveBreaks),updateTopBar($topBar2,$button2,$visibleLinks2,$hiddenLinks2,responsiveBreaks2)),$(window).width()<768?(ChangeBrandMobile(),galleryMoreItems(2),ChangePhoneMobileDetail()):(ChangeBrandAllDevice(),galleryMoreItems(5),ChangePhoneDeviceDetail()),$(window).width()<576?(ChangeNewsMobile(),ChangeCouponMobile(),ChangePhoneMobile(),titleChangeMobile()):(titleChangeDevice(),ChangePhoneDevice(),ChangeNewsAllDevice(),ChangeCouponAllDevice()),$(window).width()<992?ChangePriceMobile():ChangePriceDevice(),MobileBasket(),TransitionDetail(),orderOpenProperty(),allPhone(),MainSelect(),itemsSort()});var count_2=5;function galleryMoreItems(t){var e=$(".catalog_content__category_block .catalog_content__category_item").length;$(".catalog_content__category_block .catalog_content__category_item").css("display","none"),$(".catalog_content__category_block .catalog_content__category_item:lt("+count_2+")").show(),$("#loadMore").click(function(){count_2=count_2+count_2<=e?count_2+count_2:e,$(".catalog_content__category_block .catalog_content__category_item:lt("+count_2+")").show(),e===count_2&&$("#loadMore").remove()}),$("div").is("#loadMore2")&&e<=count_2&&$("#loadMore").remove()}function orderOpenProperty(){$(".main_order_block__item .main_order_block__item_slide_open").click(function(){$(this).parent().find(".main_order_block__item_slide").toggleClass("active"),$(this).toggleClass("active")})}function ChangeBrandMobile(){$(".brand_block").addClass("brand_block_variant owl-carousel"),$(".brand_block_variant_two").addClass("brand_block_variant owl-carousel"),$(".brand_block_variant_two").removeClass("row")}function ChangeBrandAllDevice(){$(".brand_block").removeClass("brand_block_variant owl-carousel"),$(".brand_block_variant_two").removeClass("brand_block_variant owl-carousel"),$(".brand_block_variant_two").addClass("row")}function ChangeNewsMobile(){$(".news_block").addClass("carousel-phone owl-carousel"),$(".news_block_three").addClass("carousel-phone owl-carousel")}function ChangeNewsAllDevice(){$(".news_block").removeClass("carousel-phone owl-carousel"),$(".news_block_three").removeClass("carousel-phone owl-carousel")}function ChangeCouponMobile(){$(".main_order_coupon").prependTo(".main_order")}function ChangeCouponAllDevice(){$(".main_order_coupon").appendTo(".main_order")}function ChangePriceMobile(){$(".main_order_all_price").prependTo(".main_order")}function ChangePriceDevice(){$(".main_order_coupon").appendTo(".main_order")}function ChangePhoneMobile(){$(".container_menu_mobile__phone_block").appendTo(".header_mmenu__phone_block_hidden")}function ChangePhoneDevice(){$(".container_menu_mobile__phone_block").prependTo(".header_mmenu__content_phone_and_basket")}function ChangePhoneMobileDetail(){$(".product-detail-info-block-comment").prependTo(".product-detail-photo-block"),$(".product-detail-info-block-title").prependTo(".product-detail-photo-block"),$(".product-detail-info-block-brand").prependTo(".article-mobile-block"),$(".product-detail-share-block").appendTo(".product-detail-info-block-one-click-basket")}function ChangePhoneDeviceDetail(){$(".product-detail-info-block-comment").prependTo(".detail-title-block"),$(".product-detail-info-block-title").prependTo(".detail-title-block"),$(".product-detail-info-block-brand").prependTo("#right_detail_card"),$(".product-detail-share-block").prependTo(".product-detail-share")}function TransitionDetail(){$("#all_property").on("click",".block-basic-property-link",function(t){t.preventDefault();var e=$(this).attr("href"),i=$(e).offset().top;$("body,html").animate({scrollTop:i},1500)})}function showShares(){$("#sharing-buttons").toggleClass("active")}function showModal(t){var e='<div class="wrap-popup-window"><div class="modal-popup-bg" onclick="closeModal();">&nbsp;</div><div class="popup-window"><div class="popup-close" onclick="closeModal();"></div><div class="popup-content">';e+=t,e+="</div>",$("body").append(e)}function closeModal(){BX.onCustomEvent("OnBasketChange"),$(".wrap-popup-window").last().remove()}function allPhone(){$(".header_top_block__phone__title span").is(".many_tels_wrapper")&&$(".header_top_block__phone__number").addClass("icons")}function titleChangeMobile(){$("div.personal_title_block").appendTo(".sidebar")}function titleChangeDevice(){$("div.personal_title_block").appendTo(".personal_block_component")}function foundCheaper(t,e,i){$.ajax({url:t+"include/ajax/foundcheaper.php",type:"POST",data:{lid:e,name:i},success:function(t){showModal(t)}})}function wantGift(t,e,i,s,o,a,r){$.ajax({url:t+"include/ajax/wantgift.php",type:"POST",data:{lid:e,name:i,url:s,img:o,price:a,oldPrice:r},success:function(t){showModal(t)}})}function checkStock(t,e,i){$.ajax({url:t+"include/ajax/checkstock.php",type:"POST",data:{lid:e,name:i},success:function(t){showModal(t)}})}function MobileBasket(){let t=$(".basket-block.header_info_block__item .basket-block__link_main_basket .basket-block__link_basket_cal").html(),e=$(".basket-block.header_info_block__item .basket-block__link:eq(1) .basket-block__link_basket_cal").html(),i=$(".basket-block.header_info_block__item .basket-block__link:eq(2) .basket-block__link_basket_cal").html();$(".container_menu_mobile__item_link:eq(1) .container_menu_mobile__item_link_col").html(e),$(".container_menu_mobile__item_link:eq(2) .container_menu_mobile__item_link_col").html(i),$(".container_menu_mobile__item_link:eq(3) .container_menu_mobile__item_link_col").html(t),$(".header_mmenu__content_phone_and_basket .basket-block__link_basket_cal").html(t)}function quickView(t){let e="&preview=Y";!1!==window.location.href.indexOf("clear_cache=Y")&&(e+="&clear_cache=Y"),t+=e,$.ajax({url:t,type:"POST",data:{sessid:BX.bitrix_sessid()},beforeSend:function(){BX.showWait()},success:function(t){showModal(t)},complete:function(){BX.closeWait()}})}function MainSelect(){$(".custom-select-block").each(function(){if(!$(this).parent(".custom-select-wrapper").find("div.custom-select-block").length){var t=$(this).attr("class"),e=($(this).attr("id"),$(this).attr("name"));e=$(this).find("option:selected").html();$(this).attr("placeholder",e);let s=$(this).data("placeholder");void 0===s&&(s=$(this).attr("placeholder"));let o=$(this).find("option:selected");void 0!==o&&(s=o.html());var i='<div class="'+t+'">';i+='<span class="custom-select-trigger">'+s+"</span>",i+='<div class="custom-options">',$(this).find("option").each(function(){i+='<span class="custom-option '+$(this).attr("class")+'" data-value="'+$(this).attr("value")+'">'+$(this).html()+"</span>"}),i+="</div></div>",$(this).wrap('<div class="custom-select-wrapper"></div>'),$(this).hide(),$(this).after(i)}}),$(".custom-option:first-of-type").hover(function(){$(this).parents(".custom-options").addClass("option-hover")},function(){$(this).parents(".custom-options").removeClass("option-hover")}),$(".custom-select-trigger").on("click",function(t){$("html").one("click",function(){$(".custom-select-block").removeClass("opened")}),$(this).parents(".custom-select-block").toggleClass("opened"),t.stopPropagation()}),$(".custom-option").on("click",function(){$(this).parents(".custom-options").find(".custom-option").removeClass("selection"),$(this).addClass("selection"),$(this).parents(".custom-select-block").removeClass("opened"),$(this).parents(".custom-select-block").find(".custom-select-trigger").text($(this).text()),$(this).parents(".custom-select-wrapper").find("select").val($(this).data("value")),$(this).parents(".custom-select-wrapper").find("select").trigger("change")})}function itemsSort(){const t=Array.prototype.slice.call(document.querySelectorAll(".offer-properties-item-inner__item")),e=Array.prototype.slice.call(document.querySelectorAll('.offer-properties-item-btnBlock__btn[data-action="reset-sort"]'));t.forEach(function(t){t.addEventListener("click",function(){const t=getParent(this,"index_blank-table-tbody"),e=getParent(this,"offer-properties-item-inner");e.querySelector(".active")?e.classList.add("checked"):e.classList.remove("checked");const i=Array.prototype.slice.call(t.querySelectorAll(".offer-properties-item-inner.checked")).length,s=Array.prototype.slice.call(t.querySelectorAll(".offer-item")),o=s.map(function(t){return Array.prototype.slice.call(t.querySelectorAll("[data-propvalue]"))}).map(function(t){return t.map(function(t){return r({},t.dataset.propname,t.dataset.propvalue)})}),a=Array.prototype.slice.call(t.querySelectorAll(".offer-properties-item-inner")).map(function(t){return Array.prototype.slice.call(t.querySelectorAll(".active [data-value]"))}).map(function(t){return t.map(function(t){return r({},t.dataset.name,t.dataset.value)})});function r(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}o.forEach(function(t,e){let o=[];t.forEach(function(t){for(let i in t)a.forEach(function(s){s.forEach(function(s){t[i]===s[i]&&o.push(e)})})}),i===o.length?s[e].classList.remove("hide"):s[e].classList.add("hide")})})}),e.forEach(function(t){t.addEventListener("click",function(){const t=getParent(this,"index_blank-table-tbody"),e=Array.prototype.slice.call(t.querySelectorAll(".offer-properties-item-inner__item.active")),i=Array.prototype.slice.call(t.querySelectorAll(".offer-item")),s=Array.prototype.slice.call(t.querySelectorAll(".offer-properties-item-inner.checked"));i.forEach(function(t){t.classList.remove("hide")}),e.forEach(function(t){t.classList.remove("active")}),s.forEach(function(t){t.classList.remove("checked")})})})}function getParent(t,e){let i=t;for(;!i.classList.contains(e)&&i!==document.body;)i=i.parentElement;if(i!==document.body)return i}$(function(){});