!function(t){if(!t.JCCatalogTopBanner){var s=function(t){s.superclass.constructor.apply(this,arguments),this.nameNode=BX.create("span",{props:{className:"bx_bt_button big",id:this.id},style:{position:"static",top:"0",right:"0",marginTop:"0"},text:t.text}),this.buttonNode=BX.create("span",{attrs:{className:t.ownerClass},style:{marginTop:"0",overflow:"",paddingTop:"0",position:"static"},children:[this.nameNode],events:this.contextEvents}),BX.browser.IsIE()&&this.buttonNode.setAttribute("hideFocus","hidefocus")};BX.extend(s,BX.PopupWindowButton),t.JCCatalogTopBanner=function(t){if(this.productType=0,this.showQuantity=!0,this.showAbsent=!0,this.secondPict=!1,this.showOldPrice=!1,this.showPercent=!1,this.showSkuProps=!1,this.visual={ID:"",PICT_ID:"",SECOND_PICT_ID:"",QUANTITY_ID:"",QUANTITY_UP_ID:"",QUANTITY_DOWN_ID:"",PRICE_ID:"",DSC_PERC:"",SECOND_DSC_PERC:"",DISPLAY_PROP_DIV:""},this.product={checkQuantity:!1,maxQuantity:0,stepQuantity:1,isDblQuantity:!1,canBuy:!0,canSubscription:!0,name:"",pict:{},id:0,addUrl:"",buyUrl:""},this.basketData={useProps:!1,emptyProps:!1,quantity:"quantity",props:"prop",basketUrl:""},this.defaultPict={pict:null,secondPict:null},this.checkQuantity=!1,this.maxQuantity=0,this.stepQuantity=1,this.isDblQuantity=!1,this.canBuy=!0,this.canSubscription=!0,this.precision=6,this.precisionFactor=Math.pow(10,this.precision),this.offers=[],this.offerNum=0,this.treeProps=[],this.obTreeRows=[],this.showCount=[],this.showStart=[],this.selectedValues={},this.obProduct=null,this.obQuantity=null,this.obQuantityUp=null,this.obQuantityDown=null,this.obPict=null,this.obSecondPict=null,this.obPrice=null,this.obTree=null,this.obBuyBtn=null,this.obDscPerc=null,this.obSecondDscPerc=null,this.obSkuProps=null,this.obMeasure=null,this.errorCode=0,"object"==typeof t){switch(this.productType=parseInt(t.PRODUCT_TYPE),this.showQuantity=t.SHOW_QUANTITY,this.showAbsent=t.SHOW_ABSENT,t.SECOND_PICT&&(this.secondPict=!0),t.SHOW_OLD_PRICE&&(this.showOldPrice=!0),t.SHOW_DISCOUNT_PERCENT&&(this.showPercent=!0),t.SHOW_SKU_PROPS&&(this.showSkuProps=!0),this.visual=t.VISUAL,this.productType){case 1:case 2:t.PRODUCT&&"object"==typeof t.PRODUCT?(this.showQuantity&&(this.product.checkQuantity=t.PRODUCT.CHECK_QUANTITY,this.product.isDblQuantity=t.PRODUCT.QUANTITY_FLOAT,this.product.checkQuantity&&(this.product.maxQuantity=this.product.isDblQuantity?parseFloat(t.PRODUCT.MAX_QUANTITY):parseInt(t.PRODUCT.MAX_QUANTITY)),this.product.stepQuantity=this.product.isDblQuantity?parseFloat(t.PRODUCT.STEP_QUANTITY):parseInt(t.PRODUCT.STEP_QUANTITY),this.checkQuantity=this.product.checkQuantity,this.isDblQuantity=this.product.isDblQuantity,this.maxQuantity=this.product.maxQuantity,this.stepQuantity=this.product.stepQuantity,this.isDblQuantity&&(this.stepQuantity=Math.round(this.stepQuantity*this.precisionFactor)/this.precisionFactor)),this.product.canBuy=t.PRODUCT.CAN_BUY,this.product.canSubscription=t.PRODUCT.SUBSCRIPTION,this.canBuy=this.product.canBuy,this.canSubscription=this.product.canSubscription,this.product.name=t.PRODUCT.NAME,this.product.pict=t.PRODUCT.PICT,this.product.id=t.PRODUCT.ID,t.PRODUCT.ADD_URL&&(this.product.addUrl=t.PRODUCT.ADD_URL),t.PRODUCT.BUY_URL&&(this.product.buyUrl=t.PRODUCT.BUY_URL),t.BASKET&&"object"==typeof t.BASKET&&(this.basketData.useProps=!!t.BASKET.ADD_PROPS,this.basketData.emptyProps=!!t.BASKET.EMPTY_PROPS)):this.errorCode=-1;break;case 3:t.OFFERS&&BX.type.isArray(t.OFFERS)?(this.product.name=t.PRODUCT.NAME,this.product.id=t.PRODUCT.ID,this.offers=t.OFFERS,this.offerNum=0,t.OFFER_SELECTED&&(this.offerNum=parseInt(t.OFFER_SELECTED)),isNaN(this.offerNum)&&(this.offerNum=0),t.TREE_PROPS&&(this.treeProps=t.TREE_PROPS),t.DEFAULT_PICTURE&&(this.defaultPict.pict=t.DEFAULT_PICTURE.PICTURE,this.defaultPict.secondPict=t.DEFAULT_PICTURE.PICTURE_SECOND)):this.errorCode=-1;break;default:this.errorCode=-1}t.BASKET&&"object"==typeof t.BASKET&&(t.BASKET.QUANTITY&&(this.basketData.quantity=t.BASKET.QUANTITY),t.BASKET.PROPS&&(this.basketData.props=t.BASKET.PROPS),t.BASKET.BASKET_URL&&(this.basketData.basketUrl=t.BASKET.BASKET_URL))}0===this.errorCode&&BX.ready(BX.delegate(this.Init,this))},t.JCCatalogTopBanner.prototype.Init=function(){var t=0;if(this.obProduct=BX(this.visual.ID),this.obProduct||(this.errorCode=-1),this.obPict=BX(this.visual.PICT_ID),this.obPict||(this.errorCode=-2),this.secondPict&&this.visual.SECOND_PICT_ID&&(this.obSecondPict=BX(this.visual.SECOND_PICT_ID)),this.obPrice=BX(this.visual.PRICE_ID),this.obPrice||(this.errorCode=-16),this.showQuantity&&this.visual.QUANTITY_ID&&(this.obQuantity=BX(this.visual.QUANTITY_ID),this.visual.QUANTITY_UP_ID&&(this.obQuantityUp=BX(this.visual.QUANTITY_UP_ID)),this.visual.QUANTITY_DOWN_ID&&(this.obQuantityDown=BX(this.visual.QUANTITY_DOWN_ID))),3===this.productType){if(this.visual.TREE_ID){this.obTree=BX(this.visual.TREE_ID),this.obTree||(this.errorCode=-256);var s=this.visual.TREE_ITEM_ID;for(t=0;t<this.treeProps.length;t++)if(this.obTreeRows[t]={LEFT:BX(s+this.treeProps[t].ID+"_left"),RIGHT:BX(s+this.treeProps[t].ID+"_right"),LIST:BX(s+this.treeProps[t].ID+"_list"),CONT:BX(s+this.treeProps[t].ID+"_cont")},!(this.obTreeRows[t].LEFT&&this.obTreeRows[t].RIGHT&&this.obTreeRows[t].LIST&&this.obTreeRows[t].CONT)){this.errorCode=-512;break}}this.visual.QUANTITY_MEASURE&&(this.obMeasure=BX(this.visual.QUANTITY_MEASURE))}if(this.visual.BUY_ID&&(this.obBuyBtn=BX(this.visual.BUY_ID)),this.showPercent&&(this.visual.DSC_PERC&&(this.obDscPerc=BX(this.visual.DSC_PERC)),this.secondPict&&this.visual.SECOND_DSC_PERC&&(this.obSecondDscPerc=BX(this.visual.SECOND_DSC_PERC))),this.showSkuProps&&this.visual.DISPLAY_PROP_DIV&&(this.obSkuProps=BX(this.visual.DISPLAY_PROP_DIV)),0===this.errorCode){switch(this.showQuantity&&(this.obQuantityUp&&BX.bind(this.obQuantityUp,"click",BX.delegate(this.QuantityUp,this)),this.obQuantityDown&&BX.bind(this.obQuantityDown,"click",BX.delegate(this.QuantityDown,this)),this.obQuantity&&BX.bind(this.obQuantity,"change",BX.delegate(this.QuantityChange,this))),this.productType){case 1:break;case 3:var i=BX.findChildren(this.obTree,{tagName:"li"},!0);if(i&&0<i.length)for(t=0;t<i.length;t++)BX.bind(i[t],"click",BX.delegate(this.SelectOfferProp,this));for(t=0;t<this.obTreeRows.length;t++)BX.bind(this.obTreeRows[t].LEFT,"click",BX.delegate(this.RowLeft,this)),BX.bind(this.obTreeRows[t].RIGHT,"click",BX.delegate(this.RowRight,this));this.SetCurrent()}this.obBuyBtn&&BX.bind(this.obBuyBtn,"click",BX.delegate(this.Basket,this))}},t.JCCatalogTopBanner.prototype.QuantityUp=function(){var t=0,s=!0;0===this.errorCode&&this.showQuantity&&(t=this.isDblQuantity?parseFloat(this.obQuantity.value):parseInt(this.obQuantity.value),isNaN(t)||(t+=this.stepQuantity,this.checkQuantity&&t>this.maxQuantity&&(s=!1),s&&(this.isDblQuantity&&(t=Math.round(t*this.precisionFactor)/this.precisionFactor),this.obQuantity.value=t)))},t.JCCatalogTopBanner.prototype.QuantityDown=function(){var t=0,s=!0;0===this.errorCode&&this.showQuantity&&(t=this.isDblQuantity?parseFloat(this.obQuantity.value):parseInt(this.obQuantity.value),isNaN(t)||((t-=this.stepQuantity)<this.stepQuantity&&(s=!1),s&&(this.isDblQuantity&&(t=Math.round(t*this.precisionFactor)/this.precisionFactor),this.obQuantity.value=t)))},t.JCCatalogTopBanner.prototype.QuantityChange=function(){var t=0,s=!0;0===this.errorCode&&this.showQuantity&&(t=this.isDblQuantity?parseFloat(this.obQuantity.value):parseInt(this.obQuantity.value),isNaN(t)?this.obQuantity.value=this.stepQuantity:(this.checkQuantity&&(t>this.maxQuantity?(s=!1,t=this.maxQuantity):t<this.stepQuantity&&(s=!1,t=this.stepQuantity)),s||(this.obQuantity.value=t)))},t.JCCatalogTopBanner.prototype.QuantitySet=function(t){0===this.errorCode&&(this.canBuy=this.offers[t].CAN_BUY,this.showQuantity&&(this.isDblQuantity=this.offers[t].QUANTITY_FLOAT,this.checkQuantity=this.offers[t].CHECK_QUANTITY,this.maxQuantity=this.isDblQuantity?parseFloat(this.offers[t].MAX_QUANTITY):parseInt(this.offers[t].MAX_QUANTITY),this.stepQuantity=this.isDblQuantity?parseFloat(this.offers[t].STEP_QUANTITY):parseInt(this.offers[t].STEP_QUANTITY),this.isDblQuantity&&(this.stepQuantity=Math.round(this.stepQuantity*this.precisionFactor)/this.precisionFactor),this.obQuantity.value=this.stepQuantity,this.obMeasure&&(this.offers[t].MEASURE?BX.adjust(this.obMeasure,{html:this.offers[t].MEASURE}):BX.adjust(this.obMeasure,{html:""}))))},t.JCCatalogTopBanner.prototype.SelectOfferProp=function(){var t=0,s=BX.proxy_context;if(s&&s.hasAttribute("data-treevalue")){var i=s.getAttribute("data-treevalue").split("_");if(this.SearchOfferPropIndex(i[0],i[1])){var e=BX.findChildren(s.parentNode,{tagName:"li"},!1);if(e&&0<e.length)for(t=0;t<e.length;t++)e[t].getAttribute("data-onevalue")==i[1]?BX.addClass(e[t],"bx_active"):BX.removeClass(e[t],"bx_active")}}},t.JCCatalogTopBanner.prototype.SearchOfferPropIndex=function(t,s){for(var i="",e=null,a=[],o=-1,r=0;r<this.treeProps.length;r++)if(this.treeProps[r].ID==t){o=r;break}if(-1<o){var h={};for(r=0;r<o;r++)h[i="PROP_"+this.treeProps[r].ID]=this.selectedValues[i];if(i="PROP_"+this.treeProps[o].ID,!(e=this.GetRowValues(h,i)))return!1;if(!BX.util.in_array(s,e))return!1;for(h[i]=s,r=o+1;r<this.treeProps.length;r++){if(i="PROP_"+this.treeProps[r].ID,!(e=this.GetRowValues(h,i)))return!1;if(this.showAbsent){a=[];var n=[];n=BX.clone(h,!0);for(var l=0;l<e.length;l++)n[i]=e[l],this.GetCanBuy(n)&&(a[a.length]=e[l])}else a=e;this.selectedValues[i]&&BX.util.in_array(this.selectedValues[i],a)?h[i]=this.selectedValues[i]:h[i]=a[0],this.UpdateRow(r,h[i],e,a)}this.selectedValues=h,this.ChangeInfo()}return!0},t.JCCatalogTopBanner.prototype.RowLeft=function(){var t=BX.proxy_context;if(t&&t.hasAttribute("data-treevalue")){for(var s=t.getAttribute("data-treevalue"),i=-1,e=0;e<this.treeProps.length;e++)if(this.treeProps[e].ID==s){i=e;break}-1<i&&5<this.showCount[i]&&0>this.showStart[i]&&(this.showStart[i]++,BX.adjust(this.obTreeRows[i].LIST,{style:{marginLeft:20*this.showStart[i]+"%"}}))}},t.JCCatalogTopBanner.prototype.RowRight=function(){var t=BX.proxy_context;if(t&&t.hasAttribute("data-treevalue")){for(var s=t.getAttribute("data-treevalue"),i=-1,e=0;e<this.treeProps.length;e++)if(this.treeProps[e].ID==s){i=e;break}-1<i&&5<this.showCount[i]&&5-this.showStart[i]<this.showCount[i]&&(this.showStart[i]--,BX.adjust(this.obTreeRows[i].LIST,{style:{marginLeft:20*this.showStart[i]+"%"}}))}},t.JCCatalogTopBanner.prototype.UpdateRow=function(t,s,i,e){var a,o=0,r=0,h="";if(-1<t&&t<this.obTreeRows.length){var n=BX.findChildren(this.obTreeRows[t].LIST,{tagName:"li"},!1);if(n&&0<n.length){var l={props:{className:""},style:{width:h=5<(r=i.length)?100/r+"%":"20%"}};for("PICT"==this.treeProps[t].SHOW_MODE&&(l.style.paddingTop=h),o=0;o<n.length;o++)a=n[o].getAttribute("data-onevalue"),BX.util.in_array(a,e)?l.props.className=a==s?"bx_active":"":l.props.className=a==s?"bx_active bx_missing":"bx_missing",BX.util.in_array(a,i)?l.style.display="":l.style.display="none",BX.adjust(n[o],l);l={style:{width:(5<r?20*r:100)+"%",marginLeft:"0%"}},BX.adjust(this.obTreeRows[t].LIST,l),"PICT"==this.treeProps[t].SHOW_MODE?BX.adjust(this.obTreeRows[t].CONT,{props:{className:5<r?"bx_item_detail_scu full":"bx_item_detail_scu"}}):BX.adjust(this.obTreeRows[t].CONT,{props:{className:5<r?"bx_item_detail_size full":"bx_item_detail_size"}}),5<r?(BX.adjust(this.obTreeRows[t].LEFT,{style:{display:""}}),BX.adjust(this.obTreeRows[t].RIGHT,{style:{display:""}})):(BX.adjust(this.obTreeRows[t].LEFT,{style:{display:"none"}}),BX.adjust(this.obTreeRows[t].RIGHT,{style:{display:"none"}})),this.showCount[t]=r,this.showStart[t]=0}}},t.JCCatalogTopBanner.prototype.GetRowValues=function(t,s){var i=[],e=!1,a=0;if(0===t.length){for(a=0;a<this.offers.length;a++)BX.util.in_array(this.offers[a].TREE[s],i)||(i[i.length]=this.offers[a].TREE[s]);e=!0}else for(a=0;a<this.offers.length;a++){var o=!0;for(var r in t)if(t[r]!=this.offers[a].TREE[r]){o=!1;break}o&&(BX.util.in_array(this.offers[a].TREE[s],i)||(i[i.length]=this.offers[a].TREE[s]),e=!0)}return!!e&&i},t.JCCatalogTopBanner.prototype.GetCanBuy=function(t){for(var s=!1,i=0;i<this.offers.length;i++){var e=!0;for(var a in t)if(t[a]!=this.offers[i].TREE[a]){e=!1;break}if(e&&this.offers[i].CAN_BUY){s=!0;break}}return s},t.JCCatalogTopBanner.prototype.SetCurrent=function(){for(var t={},s=[],i=this.offers[this.offerNum].TREE,e=0;e<this.treeProps.length;e++){var a="PROP_"+this.treeProps[e].ID,o=this.GetRowValues(t,a);if(!o)break;if(BX.util.in_array(i[a],o)?t[a]=i[a]:(t[a]=o[0],this.offerNum=0),this.showAbsent){s=[];var r=[];r=BX.clone(t,!0);for(var h=0;h<o.length;h++)r[a]=o[h],this.GetCanBuy(r)&&(s[s.length]=o[h])}else s=o;this.UpdateRow(e,t[a],o,s)}this.selectedValues=t,this.ChangeInfo()},t.JCCatalogTopBanner.prototype.ChangeInfo=function(){for(var t=-1,s=0;s<this.offers.length;s++){var i=!0;for(var e in this.selectedValues)if(this.selectedValues[e]!=this.offers[s].TREE[e]){i=!1;break}if(i){t=s;break}}if(-1<t){if(this.obPict&&(this.offers[t].PREVIEW_PICTURE?BX.adjust(this.obPict,{style:{backgroundImage:"url("+this.offers[t].PREVIEW_PICTURE.SRC+")"}}):BX.adjust(this.obPict,{style:{backgroundImage:"url("+this.defaultPict.pict.SRC+")"}})),this.secondPict&&this.obSecondPict&&(this.offers[t].PREVIEW_PICTURE_SECOND?BX.adjust(this.obSecondPict,{style:{backgroundImage:"url("+this.offers[t].PREVIEW_PICTURE_SECOND.SRC+")"}}):this.offers[t].PREVIEW_PICTURE.SRC?BX.adjust(this.obSecondPict,{style:{backgroundImage:"url("+this.offers[t].PREVIEW_PICTURE.SRC+")"}}):this.defaultPict.secondPict?BX.adjust(this.obSecondPict,{style:{backgroundImage:"url("+this.defaultPict.secondPict.SRC+")"}}):BX.adjust(this.obSecondPict,{style:{backgroundImage:"url("+this.defaultPict.pict.SRC+")"}})),this.showSkuProps&&this.obSkuProps&&(0===this.offers[t].DISPLAY_PROPERTIES.length?BX.adjust(this.obSkuProps,{style:{display:"none"},html:""}):BX.adjust(this.obSkuProps,{style:{display:""},html:this.offers[t].DISPLAY_PROPERTIES})),this.obPrice){var a=this.offers[t].PRICE.PRINT_DISCOUNT_VALUE;if(this.showOldPrice&&this.offers[t].PRICE.DISCOUNT_VALUE!=this.offers[t].PRICE.VALUE&&(a+=" <span>"+this.offers[t].PRICE.PRINT_VALUE+"</span>"),BX.adjust(this.obPrice,{html:a}),this.showPercent){var o={};o=this.offers[t].PRICE.DISCOUNT_VALUE!=this.offers[t].PRICE.VALUE?{style:{display:""},html:this.offers[t].PRICE.DISCOUNT_DIFF_PERCENT}:{style:{display:"none"},html:""},this.obDscPerc&&BX.adjust(this.obDscPerc,o),this.obSecondDscPerc&&BX.adjust(this.obSecondDscPerc,o)}}this.offerNum=t,this.showQuantity&&this.QuantitySet(this.offerNum)}},t.JCCatalogTopBanner.prototype.InitBasketUrl=function(){switch(this.productType){case 1:case 2:this.basketUrl=this.product.addUrl;break;case 3:this.basketUrl=this.offers[this.offerNum].ADD_URL}this.basketParams={ajax_basket:"Y"},this.showQuantity&&(this.basketParams[this.basketData.quantity]=this.obQuantity.value)},t.JCCatalogTopBanner.prototype.FillBasketProps=function(){if(this.visual.BASKET_PROP_DIV){var t=0,s=null,i=!1,e=null;if(this.basketData.useProps&&!this.basketData.emptyProps?this.obPopupWin&&this.obPopupWin.contentContainer&&(e=this.obPopupWin.contentContainer):e=BX(this.visual.BASKET_PROP_DIV),e){if((s=e.getElementsByTagName("select"))&&s.length)for(t=0;t<s.length;t++)if(!s[t].disabled)switch(s[t].type.toLowerCase()){case"select-one":this.basketParams[s[t].name]=s[t].value,i=!0}if((s=e.getElementsByTagName("input"))&&s.length)for(t=0;t<s.length;t++)if(!s[t].disabled)switch(s[t].type.toLowerCase()){case"hidden":this.basketParams[s[t].name]=s[t].value,i=!0;break;case"radio":s[t].checked&&(this.basketParams[s[t].name]=s[t].value,i=!0)}i||(this.basketParams[this.basketData.props]=[],this.basketParams[this.basketData.props][0]=0)}}},t.JCCatalogTopBanner.prototype.SendToBasket=function(){this.canBuy&&(this.InitBasketUrl(),this.FillBasketProps(),BX.ajax.loadJSON(this.basketUrl,this.basketParams,BX.delegate(this.BasketResult,this)))},t.JCCatalogTopBanner.prototype.Basket=function(){var t="";if(this.canBuy)switch(this.productType){case 1:case 2:this.basketData.useProps&&!this.basketData.emptyProps?(this.InitPopupWindow(),this.obPopupWin.setTitleBar(BX.message("TITLE_BASKET_PROPS")),BX(this.visual.BASKET_PROP_DIV)&&(t=BX(this.visual.BASKET_PROP_DIV).innerHTML),this.obPopupWin.setContent(t),this.obPopupWin.setButtons([new s({ownerClass:this.obProduct.parentNode.parentNode.className,text:BX.message("BTN_MESSAGE_SEND_PROPS"),events:{click:BX.delegate(this.SendToBasket,this)}})]),this.obPopupWin.show()):this.SendToBasket();break;case 3:this.SendToBasket()}},t.JCCatalogTopBanner.prototype.BasketResult=function(t){var i,e="",a="",o="",r=[];if(this.obPopupWin&&this.obPopupWin.close(),BX.type.isPlainObject(t)){if(i="OK"===t.STATUS){switch(BX.onCustomEvent("OnBasketChange"),a=this.product.name,this.productType){case 1:case 2:o=this.product.pict.SRC;break;case 3:o=this.offers[this.offerNum].PREVIEW_PICTURE?this.offers[this.offerNum].PREVIEW_PICTURE.SRC:this.defaultPict.pict.SRC}e='<div style="width: 100%; margin: 0; text-align: center;"><img src="'+o+'" height="130"><p>'+a+"</p></div>",r=[new s({ownerClass:this.obProduct.parentNode.parentNode.className,text:BX.message("BTN_MESSAGE_BASKET_REDIRECT"),events:{click:BX.delegate(function(){location.href=this.basketData.basketUrl?this.basketData.basketUrl:BX.message("BASKET_URL")},this)}})]}else e=t.MESSAGE?t.MESSAGE:BX.message("BASKET_UNKNOWN_ERROR"),r=[new s({ownerClass:this.obProduct.parentNode.parentNode.className,text:BX.message("BTN_MESSAGE_CLOSE"),events:{click:BX.delegate(this.obPopupWin.close,this.obPopupWin)}})];this.InitPopupWindow(),this.obPopupWin.setTitleBar(i?BX.message("TITLE_SUCCESSFUL"):BX.message("TITLE_ERROR")),this.obPopupWin.setContent(e),this.obPopupWin.setButtons(r),this.obPopupWin.show()}},t.JCCatalogTopBanner.prototype.InitPopupWindow=function(){this.obPopupWin||(this.obPopupWin=BX.PopupWindowManager.create("CatalogSectionBasket_"+this.visual.ID,null,{autoHide:!1,offsetLeft:0,offsetTop:0,overlay:!0,closeByEsc:!0,titleBar:!0,closeIcon:!0,contentColor:"white"}))},t.JCCatalogTopBannerList||(t.JCCatalogTopBannerList=function(t){this.params=null,this.prevIndex=-1,this.currentIndex=0,this.size=0,this.rotate=!1,this.rotateTimer=3e4,this.rotatePause=!1,this.showPages=!1,this.errorCode=0,this.slider={cont:null,row:null,items:null,arrows:null,left:null,right:null,pagination:null,pages:null},t&&"object"==typeof t||(this.errorCode=-1),0===this.errorCode&&(this.params=t),this.params.rotate&&(this.rotate=this.params.rotate),this.params.rotateTimer&&(this.params.rotateTimer=parseInt(this.params.rotateTimer),!isNaN(this.params.rotateTimer)&&0<=this.params.rotateTimer&&(this.rotateTimer=this.params.rotateTimer)),0===this.errorCode&&BX.ready(BX.delegate(this.Init,this))},t.JCCatalogTopBannerList.prototype.Init=function(){if(!(0>this.errorCode)){var t=0;if(this.params.cont&&(this.slider.cont=BX(this.params.cont)),this.params.items&&BX.type.isArray(this.params.items)){for(this.slider.items=[],t=0;t<this.params.items.length;t++)this.slider.items[this.slider.items.length]=BX(this.params.items[t]),this.slider.items[this.slider.items.length-1].style.opacity=0,this.slider.row||(this.slider.row=this.slider.items[this.slider.items.length-1].parentNode);this.slider.items[0].style.opacity=1,this.size=this.slider.items.length}if(this.params.arrows&&(BX.type.isDomNode(this.params.arrows)?this.slider.arrows=this.params.arrows:"object"==typeof this.params.arrows?this.slider.arrows=this.slider.cont.appendChild(BX.create("DIV",{props:{id:this.params.arrows.id,className:this.params.arrows.className}})):BX.type.isNotEmptyString(this.params.arrows)&&(this.slider.arrows=BX(this.params.arrows))),this.slider.arrows||(this.slider.arrows=this.slider.cont),this.params.left&&(BX.type.isDomNode(this.params.left)?this.slider.left=this.params.left:"object"==typeof this.params.left?this.slider.left=this.slider.arrows.appendChild(BX.create("DIV",{props:{id:this.params.left.id,className:this.params.left.className}})):BX.type.isNotEmptyString(this.params.left)&&(this.slider.left=BX(this.params.left))),this.params.right&&(BX.type.isDomNode(this.params.right)?this.slider.right=this.params.right:"object"==typeof this.params.right?this.slider.right=this.slider.arrows.appendChild(BX.create("DIV",{props:{id:this.params.right.id,className:this.params.right.className}})):BX.type.isNotEmptyString(this.params.right)&&(this.slider.right=BX(this.params.right))),this.params.pagination&&(BX.type.isDomNode(this.params.pagination)?this.slider.pagination=this.params.pagination:"object"==typeof this.params.pagination?this.slider.pagination=this.slider.cont.appendChild(BX.create("UL",{props:{id:this.params.pagination.id,className:this.params.pagination.className}})):BX.type.isNotEmptyString(this.params.pagination)&&(this.slider.pagination=BX(this.params.pagination))),this.slider.pagination)for(this.showPages=!0,this.slider.pages=[],t=0;t<this.slider.items.length;t++)this.slider.pages[this.slider.pages.length]=this.slider.pagination.appendChild(BX.create("LI",{props:{className:0===t?"active":""},attrs:{"data-pagevalue":t.toString()},events:{click:BX.delegate(this.RowMove,this)},html:"<span></span>"}));0===this.errorCode&&(this.rotate&&this.slider.cont&&0<this.rotateTimer&&(BX.bind(this.slider.cont,"mouseover",BX.delegate(this.RotateStop,this)),BX.bind(this.slider.cont,"mouseout",BX.delegate(this.RotateStart,this)),setTimeout(BX.delegate(this.RowRotate,this),this.rotateTimer)),this.slider.left&&BX.bind(this.slider.left,"click",BX.delegate(this.RowLeft,this)),this.slider.right&&BX.bind(this.slider.right,"click",BX.delegate(this.RowRight,this)))}},t.JCCatalogTopBannerList.prototype.RowStart=function(){0>this.errorCode||(BX.removeClass(this.slider.items[this.prevIndex],"active"),this.showPages&&BX.removeClass(this.slider.pages[this.prevIndex],"active"))},t.JCCatalogTopBannerList.prototype.RowAnimate=function(t){0>this.errorCode||(this.slider.items[this.prevIndex].style.opacity=(100-t.opacity)/100,this.slider.items[this.currentIndex].style.opacity=t.opacity/100)},t.JCCatalogTopBannerList.prototype.RowComplete=function(){0>this.errorCode||(BX.addClass(this.slider.items[this.currentIndex],"active"),this.showPages&&BX.addClass(this.slider.pages[this.currentIndex],"active"))},t.JCCatalogTopBannerList.prototype.RowLeft=function(){0>this.errorCode||(this.prevIndex=this.currentIndex,this.currentIndex=(0===this.currentIndex?this.size:this.currentIndex)-1,new BX.easing({duration:800,start:{left:100*-this.prevIndex},finish:{left:100*-this.currentIndex},transition:BX.easing.transitions.quart,step:BX.delegate(function(t){this.slider.row.style.left=t.left+"%"},this)}).animate(),this.RowStart(),new BX.easing({duration:1200,start:{opacity:0},finish:{opacity:100},transition:BX.easing.transitions.quart,step:BX.delegate(function(t){this.RowAnimate(t)},this),complete:BX.delegate(this.RowComplete,this)}).animate())},t.JCCatalogTopBannerList.prototype.RowRight=function(){0>this.errorCode||(this.prevIndex=this.currentIndex,this.currentIndex++,this.currentIndex==this.size&&(this.currentIndex=0),new BX.easing({duration:800,start:{left:100*-this.prevIndex},finish:{left:100*-this.currentIndex},transition:BX.easing.transitions.quart,step:BX.delegate(function(t){this.slider.row.style.left=t.left+"%"},this)}).animate(),this.RowStart(),new BX.easing({duration:1200,start:{opacity:0},finish:{opacity:100},transition:BX.easing.transitions.quart,step:BX.delegate(function(t){this.RowAnimate(t)},this),complete:BX.delegate(this.RowComplete,this)}).animate())},t.JCCatalogTopBannerList.prototype.RowMove=function(){if(!(0>this.errorCode)){var t=BX.proxy_context;if(t&&t.hasAttribute("data-pagevalue")){var s=parseInt(t.getAttribute("data-pagevalue"));!isNaN(s)&&s<this.size&&(this.prevIndex=this.currentIndex,this.currentIndex=s,this.slider.row.style.left=100*-this.currentIndex+"%",this.slider.items[this.prevIndex].style.opacity=0,this.RowStart(),new BX.easing({duration:800,start:{opacity:0},finish:{opacity:100},transition:BX.easing.transitions.quart,step:BX.delegate(function(t){this.RowAnimate(t)},this),complete:BX.delegate(this.RowComplete,this)}).animate())}}},t.JCCatalogTopBannerList.prototype.RowRotate=function(){0>this.errorCode||(this.rotatePause||this.RowRight(),setTimeout(BX.delegate(this.RowRotate,this),this.rotateTimer))},t.JCCatalogTopBannerList.prototype.RotateStart=function(){0>this.errorCode||(this.rotatePause=!1)},t.JCCatalogTopBannerList.prototype.RotateStop=function(){0>this.errorCode||(this.rotatePause=!0)})}}(window);