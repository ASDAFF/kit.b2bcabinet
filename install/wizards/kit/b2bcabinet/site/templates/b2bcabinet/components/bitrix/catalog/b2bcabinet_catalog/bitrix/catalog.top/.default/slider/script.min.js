!function(t){if(!t.JCCatalogTopSlider){var s=function(t){s.superclass.constructor.apply(this,arguments),this.nameNode=BX.create("span",{props:{className:"bx_medium bx_bt_button",id:this.id},style:"object"==typeof t.style?t.style:{},text:t.text}),this.buttonNode=BX.create("span",{attrs:{className:t.ownerClass},style:{borderBottom:"0 none transparent",marginBottom:"0",position:"static"},children:[this.nameNode],events:this.contextEvents}),BX.browser.IsIE()&&this.buttonNode.setAttribute("hideFocus","hidefocus")};BX.extend(s,BX.PopupWindowButton),t.JCCatalogTopSlider=function(t){if(this.productType=0,this.showQuantity=!0,this.showAbsent=!0,this.secondPict=!1,this.showOldPrice=!1,this.showPercent=!1,this.showSkuProps=!1,this.basketAction="ADD",this.showClosePopup=!1,this.useCompare=!1,this.visual={ID:"",PICT_ID:"",SECOND_PICT_ID:"",QUANTITY_ID:"",QUANTITY_UP_ID:"",QUANTITY_DOWN_ID:"",PRICE_ID:"",DSC_PERC:"",SECOND_DSC_PERC:"",DISPLAY_PROP_DIV:""},this.product={checkQuantity:!1,maxQuantity:0,stepQuantity:1,isDblQuantity:!1,canBuy:!0,canSubscription:!0,name:"",pict:{},id:0,addUrl:"",buyUrl:""},this.basketMode="",this.basketData={useProps:!1,emptyProps:!1,quantity:"quantity",props:"prop",basketUrl:"",sku_props:"",sku_props_var:"basket_props",add_url:"",buy_url:""},this.compareData={compareUrl:"",comparePath:""},this.defaultPict={pict:null,secondPict:null},this.checkQuantity=!1,this.maxQuantity=0,this.stepQuantity=1,this.isDblQuantity=!1,this.canBuy=!0,this.currentBasisPrice={},this.canSubscription=!0,this.precision=6,this.precisionFactor=Math.pow(10,this.precision),this.offers=[],this.offerNum=0,this.treeProps=[],this.obTreeRows=[],this.showCount=[],this.showStart=[],this.selectedValues={},this.obProduct=null,this.obQuantity=null,this.obQuantityUp=null,this.obQuantityDown=null,this.obPict=null,this.obSecondPict=null,this.obPrice=null,this.obTree=null,this.obBuyBtn=null,this.obBasketActions=null,this.obNotAvail=null,this.obDscPerc=null,this.obSecondDscPerc=null,this.obSkuProps=null,this.obMeasure=null,this.obCompare=null,this.treeRowShowSize=5,this.treeEnableArrow={display:"",cursor:"pointer",opacity:1},this.treeDisableArrow={display:"",cursor:"default",opacity:.2},this.lastElement=!1,this.containerHeight=0,this.errorCode=0,"object"==typeof t){switch(this.productType=parseInt(t.PRODUCT_TYPE,10),this.showQuantity=t.SHOW_QUANTITY,this.showAbsent=t.SHOW_ABSENT,this.secondPict=!!t.SECOND_PICT,this.showOldPrice=!!t.SHOW_OLD_PRICE,this.showPercent=!!t.SHOW_DISCOUNT_PERCENT,this.showSkuProps=!!t.SHOW_SKU_PROPS,t.ADD_TO_BASKET_ACTION&&(this.basketAction=t.ADD_TO_BASKET_ACTION),this.showClosePopup=!!t.SHOW_CLOSE_POPUP,this.useCompare=!!t.DISPLAY_COMPARE,this.visual=t.VISUAL,this.productType){case 0:case 1:case 2:t.PRODUCT&&"object"==typeof t.PRODUCT?(this.showQuantity&&(this.product.checkQuantity=t.PRODUCT.CHECK_QUANTITY,this.product.isDblQuantity=t.PRODUCT.QUANTITY_FLOAT,this.product.checkQuantity&&(this.product.maxQuantity=this.product.isDblQuantity?parseFloat(t.PRODUCT.MAX_QUANTITY):parseInt(t.PRODUCT.MAX_QUANTITY,10)),this.product.stepQuantity=this.product.isDblQuantity?parseFloat(t.PRODUCT.STEP_QUANTITY):parseInt(t.PRODUCT.STEP_QUANTITY,10),this.checkQuantity=this.product.checkQuantity,this.isDblQuantity=this.product.isDblQuantity,this.maxQuantity=this.product.maxQuantity,this.stepQuantity=this.product.stepQuantity,this.isDblQuantity&&(this.stepQuantity=Math.round(this.stepQuantity*this.precisionFactor)/this.precisionFactor)),this.product.canBuy=t.PRODUCT.CAN_BUY,this.product.canSubscription=t.PRODUCT.SUBSCRIPTION,t.PRODUCT.BASIS_PRICE&&(this.currentBasisPrice=t.PRODUCT.BASIS_PRICE),this.canBuy=this.product.canBuy,this.canSubscription=this.product.canSubscription,this.product.name=t.PRODUCT.NAME,this.product.pict=t.PRODUCT.PICT,this.product.id=t.PRODUCT.ID,t.PRODUCT.ADD_URL&&(this.product.addUrl=t.PRODUCT.ADD_URL),t.PRODUCT.BUY_URL&&(this.product.buyUrl=t.PRODUCT.BUY_URL),t.BASKET&&"object"==typeof t.BASKET&&(this.basketData.useProps=!!t.BASKET.ADD_PROPS,this.basketData.emptyProps=!!t.BASKET.EMPTY_PROPS)):this.errorCode=-1;break;case 3:t.OFFERS&&BX.type.isArray(t.OFFERS)&&(this.product.name=t.PRODUCT.NAME,this.product.id=t.PRODUCT.ID,this.offers=t.OFFERS,this.offerNum=0,t.OFFER_SELECTED&&(this.offerNum=parseInt(t.OFFER_SELECTED,10)),isNaN(this.offerNum)&&(this.offerNum=0),t.TREE_PROPS&&(this.treeProps=t.TREE_PROPS),t.DEFAULT_PICTURE&&(this.defaultPict.pict=t.DEFAULT_PICTURE.PICTURE,this.defaultPict.secondPict=t.DEFAULT_PICTURE.PICTURE_SECOND));break;default:this.errorCode=-1}t.BASKET&&"object"==typeof t.BASKET&&(t.BASKET.QUANTITY&&(this.basketData.quantity=t.BASKET.QUANTITY),t.BASKET.PROPS&&(this.basketData.props=t.BASKET.PROPS),t.BASKET.BASKET_URL&&(this.basketData.basketUrl=t.BASKET.BASKET_URL),3===this.productType&&t.BASKET.SKU_PROPS&&(this.basketData.sku_props=t.BASKET.SKU_PROPS),t.BASKET.ADD_URL_TEMPLATE&&(this.basketData.add_url=t.BASKET.ADD_URL_TEMPLATE),t.BASKET.BUY_URL_TEMPLATE&&(this.basketData.buy_url=t.BASKET.BUY_URL_TEMPLATE),""===this.basketData.add_url&&""===this.basketData.buy_url&&(this.errorCode=-1024)),this.useCompare&&(t.COMPARE&&"object"==typeof t.COMPARE?(t.COMPARE.COMPARE_PATH&&(this.compareData.comparePath=t.COMPARE.COMPARE_PATH),t.COMPARE.COMPARE_URL_TEMPLATE?this.compareData.compareUrl=t.COMPARE.COMPARE_URL_TEMPLATE:this.useCompare=!1):this.useCompare=!1),this.lastElement=!!t.LAST_ELEMENT&&"Y"===t.LAST_ELEMENT}0===this.errorCode&&BX.ready(BX.delegate(this.Init,this))},t.JCCatalogTopSlider.prototype.Init=function(){var s=0,e="",i=null;if(this.obProduct=BX(this.visual.ID),this.obProduct||(this.errorCode=-1),this.obPict=BX(this.visual.PICT_ID),this.obPict||(this.errorCode=-2),this.secondPict&&this.visual.SECOND_PICT_ID&&(this.obSecondPict=BX(this.visual.SECOND_PICT_ID)),this.obPrice=BX(this.visual.PRICE_ID),this.obPrice||(this.errorCode=-16),this.showQuantity&&this.visual.QUANTITY_ID&&(this.obQuantity=BX(this.visual.QUANTITY_ID),this.visual.QUANTITY_UP_ID&&(this.obQuantityUp=BX(this.visual.QUANTITY_UP_ID)),this.visual.QUANTITY_DOWN_ID&&(this.obQuantityDown=BX(this.visual.QUANTITY_DOWN_ID))),3===this.productType&&this.offers.length>0){if(this.visual.TREE_ID)for(this.obTree=BX(this.visual.TREE_ID),this.obTree||(this.errorCode=-256),e=this.visual.TREE_ITEM_ID,s=0;s<this.treeProps.length;s++)if(this.obTreeRows[s]={LEFT:BX(e+this.treeProps[s].ID+"_left"),RIGHT:BX(e+this.treeProps[s].ID+"_right"),LIST:BX(e+this.treeProps[s].ID+"_list"),CONT:BX(e+this.treeProps[s].ID+"_cont")},!(this.obTreeRows[s].LEFT&&this.obTreeRows[s].RIGHT&&this.obTreeRows[s].LIST&&this.obTreeRows[s].CONT)){this.errorCode=-512;break}this.visual.QUANTITY_MEASURE&&(this.obMeasure=BX(this.visual.QUANTITY_MEASURE))}if(this.obBasketActions=BX(this.visual.BASKET_ACTIONS_ID),this.obBasketActions&&this.visual.BUY_ID&&(this.obBuyBtn=BX(this.visual.BUY_ID)),this.obNotAvail=BX(this.visual.NOT_AVAILABLE_MESS),this.showPercent&&(this.visual.DSC_PERC&&(this.obDscPerc=BX(this.visual.DSC_PERC)),this.secondPict&&this.visual.SECOND_DSC_PERC&&(this.obSecondDscPerc=BX(this.visual.SECOND_DSC_PERC))),this.showSkuProps&&this.visual.DISPLAY_PROP_DIV&&(this.obSkuProps=BX(this.visual.DISPLAY_PROP_DIV)),0===this.errorCode){switch(this.showQuantity&&(this.obQuantityUp&&BX.bind(this.obQuantityUp,"click",BX.delegate(this.QuantityUp,this)),this.obQuantityDown&&BX.bind(this.obQuantityDown,"click",BX.delegate(this.QuantityDown,this)),this.obQuantity&&BX.bind(this.obQuantity,"change",BX.delegate(this.QuantityChange,this))),this.productType){case 1:break;case 3:if(this.offers.length>0){if((i=BX.findChildren(this.obTree,{tagName:"li"},!0))&&0<i.length)for(s=0;s<i.length;s++)BX.bind(i[s],"click",BX.delegate(this.SelectOfferProp,this));for(s=0;s<this.obTreeRows.length;s++)BX.bind(this.obTreeRows[s].LEFT,"click",BX.delegate(this.RowLeft,this)),BX.bind(this.obTreeRows[s].RIGHT,"click",BX.delegate(this.RowRight,this));this.SetCurrent()}}this.obBuyBtn&&("ADD"===this.basketAction?BX.bind(this.obBuyBtn,"click",BX.delegate(this.Add2Basket,this)):BX.bind(this.obBuyBtn,"click",BX.delegate(this.BuyBasket,this))),this.lastElement&&(this.containerHeight=parseInt(this.obProduct.parentNode.offsetHeight,10),isNaN(this.containerHeight)&&(this.containerHeight=0),this.setHeight(),BX.bind(t,"resize",BX.delegate(this.checkHeight,this)),BX.bind(this.obProduct.parentNode,"mouseover",BX.delegate(this.setHeight,this)),BX.bind(this.obProduct.parentNode,"mouseout",BX.delegate(this.clearHeight,this))),this.useCompare&&(this.obCompare=BX(this.visual.COMPARE_LINK_ID),this.obCompare&&BX.bind(this.obCompare,"click",BX.proxy(this.Compare,this)))}},t.JCCatalogTopSlider.prototype.checkHeight=function(){this.containerHeight=parseInt(this.obProduct.parentNode.offsetHeight,10),isNaN(this.containerHeight)&&(this.containerHeight=0)},t.JCCatalogTopSlider.prototype.setHeight=function(){0<this.containerHeight&&BX.adjust(this.obProduct.parentNode,{style:{height:this.containerHeight+"px"}})},t.JCCatalogTopSlider.prototype.clearHeight=function(){BX.adjust(this.obProduct.parentNode,{style:{height:"auto"}})},t.JCCatalogTopSlider.prototype.QuantityUp=function(){var t,s=0,e=!0;0===this.errorCode&&this.showQuantity&&this.canBuy&&(s=this.isDblQuantity?parseFloat(this.obQuantity.value):parseInt(this.obQuantity.value,10),isNaN(s)||(s+=this.stepQuantity,this.checkQuantity&&s>this.maxQuantity&&(e=!1),e&&(this.isDblQuantity&&(s=Math.round(s*this.precisionFactor)/this.precisionFactor),this.obQuantity.value=s,t={DISCOUNT_VALUE:this.currentBasisPrice.DISCOUNT_VALUE*s,VALUE:this.currentBasisPrice.VALUE*s,DISCOUNT_DIFF:this.currentBasisPrice.DISCOUNT_DIFF*s,DISCOUNT_DIFF_PERCENT:this.currentBasisPrice.DISCOUNT_DIFF_PERCENT,CURRENCY:this.currentBasisPrice.CURRENCY},this.setPrice(t))))},t.JCCatalogTopSlider.prototype.QuantityDown=function(){var t,s=0,e=!0;0===this.errorCode&&this.showQuantity&&this.canBuy&&(s=this.isDblQuantity?parseFloat(this.obQuantity.value):parseInt(this.obQuantity.value,10),isNaN(s)||((s-=this.stepQuantity)<this.stepQuantity&&(e=!1),e&&(this.isDblQuantity&&(s=Math.round(s*this.precisionFactor)/this.precisionFactor),this.obQuantity.value=s,t={DISCOUNT_VALUE:this.currentBasisPrice.DISCOUNT_VALUE*s,VALUE:this.currentBasisPrice.VALUE*s,DISCOUNT_DIFF:this.currentBasisPrice.DISCOUNT_DIFF*s,DISCOUNT_DIFF_PERCENT:this.currentBasisPrice.DISCOUNT_DIFF_PERCENT,CURRENCY:this.currentBasisPrice.CURRENCY},this.setPrice(t))))},t.JCCatalogTopSlider.prototype.QuantityChange=function(){var t,s,e,i=0;0===this.errorCode&&this.showQuantity&&(this.canBuy?(i=this.isDblQuantity?parseFloat(this.obQuantity.value):parseInt(this.obQuantity.value,10),isNaN(i)?this.obQuantity.value=this.stepQuantity:(this.checkQuantity&&i>this.maxQuantity&&(i=this.maxQuantity),i<this.stepQuantity?i=this.stepQuantity:(e=Math.round(i*this.precisionFactor/this.stepQuantity)/this.precisionFactor,s=parseInt(e,10),isNaN(s)&&(s=1,e=1.1),e>s&&(i=s<=1?this.stepQuantity:s*this.stepQuantity,i=Math.round(i*this.precisionFactor)/this.precisionFactor)),this.obQuantity.value=i)):this.obQuantity.value=this.stepQuantity,t={DISCOUNT_VALUE:this.currentBasisPrice.DISCOUNT_VALUE*this.obQuantity.value,VALUE:this.currentBasisPrice.VALUE*this.obQuantity.value,DISCOUNT_DIFF:this.currentBasisPrice.DISCOUNT_DIFF*this.obQuantity.value,DISCOUNT_DIFF_PERCENT:this.currentBasisPrice.DISCOUNT_DIFF_PERCENT,CURRENCY:this.currentBasisPrice.CURRENCY},this.setPrice(t))},t.JCCatalogTopSlider.prototype.QuantitySet=function(t){0===this.errorCode&&(this.canBuy=this.offers[t].CAN_BUY,this.canBuy?(this.obBasketActions&&BX.style(this.obBasketActions,"display",""),this.obNotAvail&&BX.style(this.obNotAvail,"display","none")):(this.obBasketActions&&BX.style(this.obBasketActions,"display","none"),this.obNotAvail&&BX.style(this.obNotAvail,"display","")),this.showQuantity&&(this.isDblQuantity=this.offers[t].QUANTITY_FLOAT,this.checkQuantity=this.offers[t].CHECK_QUANTITY,this.isDblQuantity?(this.maxQuantity=parseFloat(this.offers[t].MAX_QUANTITY),this.stepQuantity=Math.round(parseFloat(this.offers[t].STEP_QUANTITY)*this.precisionFactor)/this.precisionFactor):(this.maxQuantity=parseInt(this.offers[t].MAX_QUANTITY,10),this.stepQuantity=parseInt(this.offers[t].STEP_QUANTITY,10)),this.obQuantity.value=this.stepQuantity,this.obQuantity.disabled=!this.canBuy,this.obMeasure&&(this.offers[t].MEASURE?BX.adjust(this.obMeasure,{html:this.offers[t].MEASURE}):BX.adjust(this.obMeasure,{html:""}))),this.currentBasisPrice=this.offers[t].BASIS_PRICE)},t.JCCatalogTopSlider.prototype.SelectOfferProp=function(){var t=0,s=[],e=null,i=BX.proxy_context;if(i&&i.hasAttribute("data-treevalue")&&(s=i.getAttribute("data-treevalue").split("_"),this.SearchOfferPropIndex(s[0],s[1])&&(e=BX.findChildren(i.parentNode,{tagName:"li"},!1))&&0<e.length))for(t=0;t<e.length;t++)e[t].getAttribute("data-onevalue")===s[1]?BX.addClass(e[t],"bx_active"):BX.removeClass(e[t],"bx_active")},t.JCCatalogTopSlider.prototype.SearchOfferPropIndex=function(t,s){var e,i,a="",o=!1,r=[],h=[],n=-1,l={},p=[];for(e=0;e<this.treeProps.length;e++)if(this.treeProps[e].ID===t){n=e;break}if(-1<n){for(e=0;e<n;e++)l[a="PROP_"+this.treeProps[e].ID]=this.selectedValues[a];if(a="PROP_"+this.treeProps[n].ID,!(o=this.GetRowValues(l,a)))return!1;if(!BX.util.in_array(s,o))return!1;for(l[a]=s,e=n+1;e<this.treeProps.length;e++){if(a="PROP_"+this.treeProps[e].ID,!(o=this.GetRowValues(l,a)))return!1;if(h=[],this.showAbsent)for(r=[],p=[],p=BX.clone(l,!0),i=0;i<o.length;i++)p[a]=o[i],h[h.length]=o[i],this.GetCanBuy(p)&&(r[r.length]=o[i]);else r=o;this.selectedValues[a]&&BX.util.in_array(this.selectedValues[a],r)?l[a]=this.selectedValues[a]:this.showAbsent?l[a]=r.length>0?r[0]:h[0]:l[a]=r[0],this.UpdateRow(e,l[a],o,r)}this.selectedValues=l,this.ChangeInfo()}return!0},t.JCCatalogTopSlider.prototype.RowLeft=function(){var t=0,s="",e=-1,i=BX.proxy_context;if(i&&i.hasAttribute("data-treevalue")){for(s=i.getAttribute("data-treevalue"),t=0;t<this.treeProps.length;t++)if(this.treeProps[t].ID===s){e=t;break}-1<e&&this.treeRowShowSize<this.showCount[e]&&(0>this.showStart[e]&&(this.showStart[e]++,BX.adjust(this.obTreeRows[e].LIST,{style:{marginLeft:20*this.showStart[e]+"%"}}),BX.adjust(this.obTreeRows[e].RIGHT,{style:this.treeEnableArrow})),0<=this.showStart[e]&&BX.adjust(this.obTreeRows[e].LEFT,{style:this.treeDisableArrow}))}},t.JCCatalogTopSlider.prototype.RowRight=function(){var t=0,s="",e=-1,i=BX.proxy_context;if(i&&i.hasAttribute("data-treevalue")){for(s=i.getAttribute("data-treevalue"),t=0;t<this.treeProps.length;t++)if(this.treeProps[t].ID===s){e=t;break}-1<e&&this.treeRowShowSize<this.showCount[e]&&(this.treeRowShowSize-this.showStart[e]<this.showCount[e]&&(this.showStart[e]--,BX.adjust(this.obTreeRows[e].LIST,{style:{marginLeft:20*this.showStart[e]+"%"}}),BX.adjust(this.obTreeRows[e].LEFT,{style:this.treeEnableArrow})),this.treeRowShowSize-this.showStart[e]>=this.showCount[e]&&BX.adjust(this.obTreeRows[e].RIGHT,{style:this.treeDisableArrow}))}},t.JCCatalogTopSlider.prototype.UpdateRow=function(t,s,e,i){var a=0,o=0,r="",h=0,n="",l={},p=!1,u=!1,c=!1,d=0,P=this.treeEnableArrow,T=this.treeEnableArrow,C=0,b=null;if(-1<t&&t<this.obTreeRows.length&&(b=BX.findChildren(this.obTreeRows[t].LIST,{tagName:"li"},!1))&&0<b.length){for(p="PICT"===this.treeProps[t].SHOW_MODE,h=e.length,l={props:{className:""},style:{width:n=(u=this.treeRowShowSize<h)?100/h+"%":"20%"}},p&&(l.style.paddingTop=n),a=0;a<b.length;a++)c=(r=b[a].getAttribute("data-onevalue"))===s,BX.util.in_array(r,i)?l.props.className=c?"bx_active":"":l.props.className=c?"bx_active bx_missing":"bx_missing",l.style.display="none",BX.util.in_array(r,e)&&(l.style.display="",c&&(d=o),o++),BX.adjust(b[a],l);l={style:{width:(u?20*h:100)+"%",marginLeft:"0%"}},p?BX.adjust(this.obTreeRows[t].CONT,{props:{className:u?"bx_item_detail_scu full":"bx_item_detail_scu"}}):BX.adjust(this.obTreeRows[t].CONT,{props:{className:u?"bx_item_detail_size full":"bx_item_detail_size"}}),u?(d+1===h&&(T=this.treeDisableArrow),this.treeRowShowSize<=d&&(C=this.treeRowShowSize-d-1,l.style.marginLeft=20*C+"%"),0===C&&(P=this.treeDisableArrow),BX.adjust(this.obTreeRows[t].LEFT,{style:P}),BX.adjust(this.obTreeRows[t].RIGHT,{style:T})):(BX.adjust(this.obTreeRows[t].LEFT,{style:{display:"none"}}),BX.adjust(this.obTreeRows[t].RIGHT,{style:{display:"none"}})),BX.adjust(this.obTreeRows[t].LIST,l),this.showCount[t]=h,this.showStart[t]=C}},t.JCCatalogTopSlider.prototype.GetRowValues=function(t,s){var e,i=0,a=[],o=!1,r=!0;if(0===t.length){for(i=0;i<this.offers.length;i++)BX.util.in_array(this.offers[i].TREE[s],a)||(a[a.length]=this.offers[i].TREE[s]);o=!0}else for(i=0;i<this.offers.length;i++){for(e in r=!0,t)if(t[e]!==this.offers[i].TREE[e]){r=!1;break}r&&(BX.util.in_array(this.offers[i].TREE[s],a)||(a[a.length]=this.offers[i].TREE[s]),o=!0)}return!!o&&a},t.JCCatalogTopSlider.prototype.GetCanBuy=function(t){var s,e=0,i=!1,a=!0;for(e=0;e<this.offers.length;e++){for(s in a=!0,t)if(t[s]!==this.offers[e].TREE[s]){a=!1;break}if(a&&this.offers[e].CAN_BUY){i=!0;break}}return i},t.JCCatalogTopSlider.prototype.SetCurrent=function(){var t=0,s=0,e=[],i="",a=!1,o={},r=[],h=this.offers[this.offerNum].TREE;for(t=0;t<this.treeProps.length&&(i="PROP_"+this.treeProps[t].ID,a=this.GetRowValues(o,i));t++){if(BX.util.in_array(h[i],a)?o[i]=h[i]:(o[i]=a[0],this.offerNum=0),this.showAbsent)for(e=[],r=[],r=BX.clone(o,!0),s=0;s<a.length;s++)r[i]=a[s],this.GetCanBuy(r)&&(e[e.length]=a[s]);else e=a;this.UpdateRow(t,o[i],a,e)}this.selectedValues=o,this.ChangeInfo()},t.JCCatalogTopSlider.prototype.ChangeInfo=function(){var t,s=0,e=-1,i=!0;for(s=0;s<this.offers.length;s++){for(t in i=!0,this.selectedValues)if(this.selectedValues[t]!==this.offers[s].TREE[t]){i=!1;break}if(i){e=s;break}}-1<e&&(this.obPict&&(this.offers[e].PREVIEW_PICTURE?BX.adjust(this.obPict,{style:{backgroundImage:"url("+this.offers[e].PREVIEW_PICTURE.SRC+")"}}):BX.adjust(this.obPict,{style:{backgroundImage:"url("+this.defaultPict.pict.SRC+")"}})),this.secondPict&&this.obSecondPict&&(this.offers[e].PREVIEW_PICTURE_SECOND?BX.adjust(this.obSecondPict,{style:{backgroundImage:"url("+this.offers[e].PREVIEW_PICTURE_SECOND.SRC+")"}}):this.offers[e].PREVIEW_PICTURE.SRC?BX.adjust(this.obSecondPict,{style:{backgroundImage:"url("+this.offers[e].PREVIEW_PICTURE.SRC+")"}}):this.defaultPict.secondPict?BX.adjust(this.obSecondPict,{style:{backgroundImage:"url("+this.defaultPict.secondPict.SRC+")"}}):BX.adjust(this.obSecondPict,{style:{backgroundImage:"url("+this.defaultPict.pict.SRC+")"}})),this.showSkuProps&&this.obSkuProps&&(0===this.offers[e].DISPLAY_PROPERTIES.length?BX.adjust(this.obSkuProps,{style:{display:"none"},html:""}):BX.adjust(this.obSkuProps,{style:{display:""},html:this.offers[e].DISPLAY_PROPERTIES})),this.setPrice(this.offers[e].PRICE),this.offerNum=e,this.QuantitySet(this.offerNum))},t.JCCatalogTopSlider.prototype.setPrice=function(t){var s,e;this.obPrice&&(s=BX.Currency.currencyFormat(t.DISCOUNT_VALUE,t.CURRENCY,!0),this.showOldPrice&&t.DISCOUNT_VALUE!==t.VALUE&&(s+=" <span>"+BX.Currency.currencyFormat(t.VALUE,t.CURRENCY,!0)+"</span>"),BX.adjust(this.obPrice,{html:s}),this.showPercent&&(e=t.DISCOUNT_VALUE!==t.VALUE?{style:{display:""},html:t.DISCOUNT_DIFF_PERCENT}:{style:{display:"none"},html:""},this.obDscPerc&&BX.adjust(this.obDscPerc,e),this.obSecondDscPerc&&BX.adjust(this.obSecondDscPerc,e)))},t.JCCatalogTopSlider.prototype.Compare=function(){var t,s;if(this.compareData.compareUrl){switch(this.productType){case 0:case 1:case 2:s=this.compareData.compareUrl.replace("#ID#",this.product.id.toString());break;case 3:s=this.compareData.compareUrl.replace("#ID#",this.offers[this.offerNum].ID)}t={ajax_action:"Y"},BX.ajax.loadJSON(s,t,BX.proxy(this.CompareResult,this))}},t.JCCatalogTopSlider.prototype.CompareResult=function(t){var e,i;this.obPopupWin&&this.obPopupWin.close(),BX.type.isPlainObject(t)&&(this.InitPopupWindow(),"OK"===t.STATUS?(BX.onCustomEvent("OnCompareChange"),e='<div style="width: 100%; margin: 0; text-align: center;"><p>'+BX.message("COMPARE_MESSAGE_OK")+"</p></div>",i=this.showClosePopup?[new s({ownerClass:this.obProduct.parentNode.parentNode.parentNode.parentNode.className,text:BX.message("BTN_MESSAGE_COMPARE_REDIRECT"),events:{click:BX.delegate(this.CompareRedirect,this)},style:{marginRight:"10px"}}),new s({ownerClass:this.obProduct.parentNode.parentNode.parentNode.parentNode.className,text:BX.message("BTN_MESSAGE_CLOSE_POPUP"),events:{click:BX.delegate(this.obPopupWin.close,this.obPopupWin)}})]:[new s({ownerClass:this.obProduct.parentNode.parentNode.parentNode.parentNode.className,text:BX.message("BTN_MESSAGE_COMPARE_REDIRECT"),events:{click:BX.delegate(this.CompareRedirect,this)}})]):(e='<div style="width: 100%; margin: 0; text-align: center;"><p>'+(t.MESSAGE?t.MESSAGE:BX.message("COMPARE_UNKNOWN_ERROR"))+"</p></div>",i=[new s({ownerClass:this.obProduct.parentNode.parentNode.parentNode.parentNode.className,text:BX.message("BTN_MESSAGE_CLOSE"),events:{click:BX.delegate(this.obPopupWin.close,this.obPopupWin)}})]),this.obPopupWin.setTitleBar(BX.message("COMPARE_TITLE")),this.obPopupWin.setContent(e),this.obPopupWin.setButtons(i),this.obPopupWin.show())},t.JCCatalogTopSlider.prototype.CompareRedirect=function(){this.compareData.comparePath?location.href=this.compareData.comparePath:this.obPopupWin.close()},t.JCCatalogTopSlider.prototype.InitBasketUrl=function(){switch(this.basketUrl="ADD"===this.basketMode?this.basketData.add_url:this.basketData.buy_url,this.productType){case 1:case 2:this.basketUrl=this.basketUrl.replace("#ID#",this.product.id.toString());break;case 3:this.basketUrl=this.basketUrl.replace("#ID#",this.offers[this.offerNum].ID)}this.basketParams={ajax_basket:"Y"},this.showQuantity&&(this.basketParams[this.basketData.quantity]=this.obQuantity.value),this.basketData.sku_props&&(this.basketParams[this.basketData.sku_props_var]=this.basketData.sku_props)},t.JCCatalogTopSlider.prototype.FillBasketProps=function(){if(this.visual.BASKET_PROP_DIV){var t=0,s=null,e=!1,i=null;if(this.basketData.useProps&&!this.basketData.emptyProps?this.obPopupWin&&this.obPopupWin.contentContainer&&(i=this.obPopupWin.contentContainer):i=BX(this.visual.BASKET_PROP_DIV),i){if((s=i.getElementsByTagName("select"))&&s.length)for(t=0;t<s.length;t++)if(!s[t].disabled)switch(s[t].type.toLowerCase()){case"select-one":this.basketParams[s[t].name]=s[t].value,e=!0}if((s=i.getElementsByTagName("input"))&&s.length)for(t=0;t<s.length;t++)if(!s[t].disabled)switch(s[t].type.toLowerCase()){case"hidden":this.basketParams[s[t].name]=s[t].value,e=!0;break;case"radio":s[t].checked&&(this.basketParams[s[t].name]=s[t].value,e=!0)}}e||(this.basketParams[this.basketData.props]=[],this.basketParams[this.basketData.props][0]=0)}},t.JCCatalogTopSlider.prototype.Add2Basket=function(){this.basketMode="ADD",this.Basket()},t.JCCatalogTopSlider.prototype.BuyBasket=function(){this.basketMode="BUY",this.Basket()},t.JCCatalogTopSlider.prototype.SendToBasket=function(){this.canBuy&&(this.InitBasketUrl(),this.FillBasketProps(),BX.ajax.loadJSON(this.basketUrl,this.basketParams,BX.delegate(this.BasketResult,this)))},t.JCCatalogTopSlider.prototype.Basket=function(){var t="";if(this.canBuy)switch(this.productType){case 1:case 2:this.basketData.useProps&&!this.basketData.emptyProps?(this.InitPopupWindow(),this.obPopupWin.setTitleBar(BX.message("TITLE_BASKET_PROPS")),BX(this.visual.BASKET_PROP_DIV)&&(t=BX(this.visual.BASKET_PROP_DIV).innerHTML),this.obPopupWin.setContent(t),this.obPopupWin.setButtons([new s({ownerClass:this.obProduct.parentNode.parentNode.parentNode.parentNode.className,text:BX.message("BTN_MESSAGE_SEND_PROPS"),events:{click:BX.delegate(this.SendToBasket,this)}})]),this.obPopupWin.show()):this.SendToBasket();break;case 3:this.SendToBasket()}},t.JCCatalogTopSlider.prototype.BasketResult=function(t){var e,i="",a="",o=[];if(this.obPopupWin&&this.obPopupWin.close(),BX.type.isPlainObject(t))if((e="OK"===t.STATUS)&&"BUY"===this.basketAction)this.BasketRedirect();else{if(this.InitPopupWindow(),e){switch(BX.onCustomEvent("OnBasketChange"),this.productType){case 1:case 2:a=this.product.pict.SRC;break;case 3:a=this.offers[this.offerNum].PREVIEW_PICTURE?this.offers[this.offerNum].PREVIEW_PICTURE.SRC:this.defaultPict.pict.SRC}i='<div style="width: 100%; margin: 0; text-align: center;"><img src="'+a+'" height="130" style="max-height:130px"><p>'+this.product.name+"</p></div>",o=this.showClosePopup?[new s({ownerClass:this.obProduct.parentNode.parentNode.parentNode.parentNode.className,text:BX.message("BTN_MESSAGE_BASKET_REDIRECT"),events:{click:BX.delegate(this.BasketRedirect,this)},style:{marginRight:"10px"}}),new s({ownerClass:this.obProduct.parentNode.parentNode.parentNode.parentNode.className,text:BX.message("BTN_MESSAGE_CLOSE_POPUP"),events:{click:BX.delegate(this.obPopupWin.close,this.obPopupWin)}})]:[new s({ownerClass:this.obProduct.parentNode.parentNode.parentNode.parentNode.className,text:BX.message("BTN_MESSAGE_BASKET_REDIRECT"),events:{click:BX.delegate(this.BasketRedirect,this)}})]}else i='<div style="width: 100%; margin: 0; text-align: center;"><p>'+(t.MESSAGE?t.MESSAGE:BX.message("BASKET_UNKNOWN_ERROR"))+"</p></div>",o=[new s({ownerClass:this.obProduct.parentNode.parentNode.parentNode.parentNode.className,text:BX.message("BTN_MESSAGE_CLOSE"),events:{click:BX.delegate(this.obPopupWin.close,this.obPopupWin)}})];this.obPopupWin.setTitleBar(e?BX.message("TITLE_SUCCESSFUL"):BX.message("TITLE_ERROR")),this.obPopupWin.setContent(i),this.obPopupWin.setButtons(o),this.obPopupWin.show()}},t.JCCatalogTopSlider.prototype.BasketRedirect=function(){location.href=this.basketData.basketUrl?this.basketData.basketUrl:BX.message("BASKET_URL")},t.JCCatalogTopSlider.prototype.InitPopupWindow=function(){this.obPopupWin||(this.obPopupWin=BX.PopupWindowManager.create("CatalogSectionBasket_"+this.visual.ID,null,{autoHide:!1,offsetLeft:0,offsetTop:0,overlay:!0,closeByEsc:!0,titleBar:!0,closeIcon:!0,contentColor:"white"}))},t.JCCatalogTopSliderList||(t.JCCatalogTopSliderList=function(t){this.params=null,this.currentIndex=0,this.size=0,this.rotate=!1,this.rotateTimer=3e4,this.rotatePause=!1,this.showPages=!1,this.errorCode=0,this.slider={cont:null,rows:null,left:null,right:null,pagination:null,pages:null},t&&"object"==typeof t||(this.errorCode=-1),0===this.errorCode&&(this.params=t),this.params.rotate&&(this.rotate=this.params.rotate),this.params.rotateTimer&&(this.params.rotateTimer=parseInt(this.params.rotateTimer,10),!isNaN(this.params.rotateTimer)&&0<=this.params.rotateTimer&&(this.rotateTimer=this.params.rotateTimer)),0===this.errorCode&&BX.ready(BX.delegate(this.Init,this))},t.JCCatalogTopSliderList.prototype.Init=function(){if(!(0>this.errorCode)){var t=0;if(this.params.cont&&(this.slider.cont=BX(this.params.cont)),this.params.rows&&BX.type.isArray(this.params.rows)){for(this.slider.rows=[],t=0;t<this.params.rows.length;t++)this.slider.rows[this.slider.rows.length]=BX(this.params.rows[t]),this.slider.cont||(this.slider.cont=this.slider.rows[this.slider.rows.length-1].parent);this.size=this.slider.rows.length}if(this.params.left&&(BX.type.isDomNode(this.params.left)?this.slider.left=this.params.left:"object"==typeof this.params.left?this.slider.left=this.slider.cont.appendChild(BX.create("DIV",{props:{id:this.params.left.id,className:this.params.left.className}})):BX.type.isNotEmptyString(this.params.left)&&(this.slider.left=BX(this.params.left))),this.params.right&&(BX.type.isDomNode(this.params.right)?this.slider.right=this.params.right:"object"==typeof this.params.right?this.slider.right=this.slider.cont.appendChild(BX.create("DIV",{props:{id:this.params.right.id,className:this.params.right.className}})):BX.type.isNotEmptyString(this.params.right)&&(this.slider.right=BX(this.params.right))),this.params.pagination&&(BX.type.isDomNode(this.params.pagination)?this.slider.pagination=this.params.pagination:"object"==typeof this.params.pagination?this.slider.pagination=this.slider.cont.appendChild(BX.create("UL",{props:{id:this.params.pagination.id,className:this.params.pagination.className}})):BX.type.isNotEmptyString(this.params.pagination)&&(this.slider.pagination=BX(this.params.pagination))),this.slider.pagination)for(this.showPages=!0,this.slider.pages=[],t=0;t<this.slider.rows.length;t++)this.slider.pages[this.slider.pages.length]=this.slider.pagination.appendChild(BX.create("LI",{props:{className:0===t?"active":"notactive"},attrs:{"data-pagevalue":t.toString()},events:{click:BX.delegate(this.RowMove,this)},html:"<span></span>"}));0===this.errorCode&&(this.rotate&&this.slider.cont&&0<this.rotateTimer&&(BX.bind(this.slider.cont,"mouseover",BX.delegate(this.RotateStop,this)),BX.bind(this.slider.cont,"mouseout",BX.delegate(this.RotateStart,this)),setTimeout(BX.delegate(this.RowRotate,this),this.rotateTimer)),this.slider.left&&BX.bind(this.slider.left,"click",BX.delegate(this.RowLeft,this)),this.slider.right&&BX.bind(this.slider.right,"click",BX.delegate(this.RowRight,this)))}},t.JCCatalogTopSliderList.prototype.RowLeft=function(){0>this.errorCode||(this.showPages&&BX.adjust(this.slider.pages[this.currentIndex],{props:{className:"notactive"}}),BX.adjust(this.slider.rows[this.currentIndex],{props:{className:"bx_catalog_tile_slide notactive"}}),this.currentIndex=(0===this.currentIndex?this.size:this.currentIndex)-1,this.showPages&&BX.adjust(this.slider.pages[this.currentIndex],{props:{className:"active"}}),BX.adjust(this.slider.rows[this.currentIndex],{props:{className:"bx_catalog_tile_slide active"}}))},t.JCCatalogTopSliderList.prototype.RowRight=function(){0>this.errorCode||(this.showPages&&BX.adjust(this.slider.pages[this.currentIndex],{props:{className:"notactive"}}),BX.adjust(this.slider.rows[this.currentIndex],{props:{className:"bx_catalog_tile_slide notactive"}}),this.currentIndex++,this.currentIndex===this.size&&(this.currentIndex=0),this.showPages&&BX.adjust(this.slider.pages[this.currentIndex],{props:{className:"active"}}),BX.adjust(this.slider.rows[this.currentIndex],{props:{className:"bx_catalog_tile_slide active"}}))},t.JCCatalogTopSliderList.prototype.RowMove=function(){if(!(0>this.errorCode)){var t=0,s=BX.proxy_context;s&&s.hasAttribute("data-pagevalue")&&(t=parseInt(s.getAttribute("data-pagevalue"),10),!isNaN(t)&&t<this.size&&(this.showPages&&BX.adjust(this.slider.pages[this.currentIndex],{props:{className:"notactive"}}),BX.adjust(this.slider.rows[this.currentIndex],{props:{className:"bx_catalog_tile_slide notactive"}}),this.currentIndex=t,this.showPages&&BX.adjust(this.slider.pages[this.currentIndex],{props:{className:"active"}}),BX.adjust(this.slider.rows[this.currentIndex],{props:{className:"bx_catalog_tile_slide active"}})))}},t.JCCatalogTopSliderList.prototype.RowRotate=function(){0>this.errorCode||(this.rotatePause||this.RowRight(),setTimeout(BX.delegate(this.RowRotate,this),this.rotateTimer))},t.JCCatalogTopSliderList.prototype.RotateStart=function(){0>this.errorCode||(this.rotatePause=!1)},t.JCCatalogTopSliderList.prototype.RotateStop=function(){0>this.errorCode||(this.rotatePause=!0)})}}(window);