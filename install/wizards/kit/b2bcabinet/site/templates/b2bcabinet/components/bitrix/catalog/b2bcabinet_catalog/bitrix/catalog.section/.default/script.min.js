function relocateTableHeader(){let e=document.getElementById("index_blank-thead"),t=e.querySelectorAll("th"),o=document.getElementById("index_blank-thead_fixed");for(let e=0;e<t.length;e++){let n=document.createElement("div");n.innerText=t[e].innerText,n.style.display="inline-block",o.appendChild(n)}let n={hide:function(){e.style.opacity="0",e.style.visibility="hidden"},show:function(){e.style.opacity="1",e.style.visibility="visible"}};function i(){n.show();let e=o.querySelectorAll("div");for(let o=0;o<t.length;o++)e[o].style.width=t[o].offsetWidth+"px",e[o].style.height=t[o].offsetHeight+"px";n.hide()}n.hide(),i(),window.addEventListener("resize",i)}function setEarsTopPosition(){let e=document.querySelectorAll(".scroll-ears"),t=document.documentElement.clientHeight,o=document.querySelector(".anchor_header"),n=document.querySelector(".table-responsive").clientHeight,i=0;o&&(i=o.getBoundingClientRect().top);let a=i<0?t/2-i:(t-i)/2,r=100*(a=-i+t>n?(n+i)/2-i:a)/n;r<0?r=0:r>100&&(r=100);for(let t=0;t<e.length;t++)e[t].style.top=r+"%"}function setEventsIndexBlankTable(){window.addEventListener("scroll",s),window.addEventListener("load",s),window.addEventListener("resize",function(){s(),r()});let e,t=document.querySelector(".datatable-scroll"),o=document.querySelector(".main-grid-ear-left"),n=document.querySelector(".main-grid-ear-right"),i=document.querySelector(".index_blank-table");i&&document.querySelector(".index_blank-thead_fixed-wrapper")&&(document.querySelector(".index_blank-thead_fixed-wrapper").style.width=i.clientWidth+"px"),o.addEventListener("mouseover",function(){e=setInterval(function(){d("left")},.5)}),o.addEventListener("mouseout",function(){clearTimeout(e)}),n.addEventListener("mouseover",function(){e=setInterval(function(){d("right")},.5)}),n.addEventListener("mouseout",function(){clearTimeout(e)});new PerfectScrollbar(".datatable-scroll",{wheelSpeed:.5,wheelPropagation:!0,minScrollbarLength:20,suppressScrollY:!0});let a={showAll:function(){let e=document.querySelectorAll(".index_blank .table-responsive .scroll-ears");for(let t=0;t<e.length;t++)e[t].style.display="flex"},hideAll:function(){let e=document.querySelectorAll(".index_blank .table-responsive .scroll-ears");for(let t=0;t<e.length;t++)e[t].style.display="none"},hideLeft:function(){o.style.opacity="0",o.style.visibility="hidden"},hideRight:function(){n.style.opacity="0",n.style.visibility="hidden"},showLeft:function(){o.style.opacity="1",o.style.visibility="visible"},showRight:function(){n.style.opacity="1",n.style.visibility="visible"}};function r(){let e=t.scrollWidth,o=t.clientWidth,n=t.scrollLeft;e-o>2?(a.showAll(),0===n?a.hideLeft():a.showLeft(),o+n===e?a.hideRight():a.showRight()):a.hideAll()}function s(){let e=$(document).scrollTop(),t=0,o=0;document.querySelector(".anchor_header")&&document.querySelector(".anchor")&&(o=$(".anchor_header").offset().top,t=$(".anchor").offset().top);let n=document.querySelector(".index_blank-thead_fixed-wrapper");if(o>e||t<e+80)$(".index_blank-thead_fixed-wrapper").removeClass("thead_fixed-wrapper-fixed"),n.style.width="auto",n.style.height="auto",n.style.overflow="",document.querySelector("#index_blank-thead_fixed").style.left="0";else{$(".index_blank-thead_fixed-wrapper").addClass("thead_fixed-wrapper-fixed");let e=document.querySelector(".index_blank-table"),t=document.getElementById("index_blank-thead_fixed");n.style.width=e.clientWidth+"px",n.style.height=t.clientHeight+"px",n.style.overflow="hidden",function(){let e=document.querySelector(".datatable-scroll"),t=document.querySelector(".table-responsive");function o(){let o=e.scrollLeft,n=t.scrollLeft,i=document.querySelector("#index_blank-thead_fixed"),a=Math.max(o,n);document.querySelector(".thead_fixed-wrapper-fixed")&&(i.style.left="-"+a+"px")}e.addEventListener("scroll",o),t.addEventListener("scroll",o),o()}()}}function d(e){if(t.scrollWidth-t.clientWidth>2)switch(r(),e){case"left":!function(){0!==t.scrollLeft&&(t.scrollLeft=t.scrollLeft-5);r()}();break;case"right":!function(){let e=t.scrollWidth,o=t.clientWidth,n=t.scrollLeft;o+n<e&&(t.scrollLeft=t.scrollLeft+5);r()}()}else r()}r()}function fixAddToCard(){if(window.addEventListener("load",o),window.addEventListener("scroll",o),window.addEventListener("resize",function(){let e=document.querySelector(".datatable-scroll");document.querySelector(".row-under-modifications").style.width=e.clientWidth+"px",o()}),$(".row-under-modifications").length>0){var e=$(".row-under-modifications").offset().top;e>$(window).height()&&(e=$(window).height())}let t=document.querySelector(".datatable-scroll");function o(){let t=$(document).scrollTop(),o=$(".anchor").offset().top,n=$(".anchor_header").offset().top,i=$(".row-under-modifications").outerHeight();o<t+i+e||n+100>t+$(window).height()?($(".row-under-modifications").addClass("row-under-modifications-fixed"),$(".row-under-modifications").removeClass("fixed-add-cart-animation")):($(".row-under-modifications").removeClass("row-under-modifications-fixed"),$(".row-under-modifications").addClass("fixed-add-cart-animation"))}document.querySelector(".row-under-modifications").style.width=t.clientWidth+"px"}!function(){"use strict";function e(e){document.querySelector(".export_excel_preloader > i").setAttribute("class",e)}function t(){e("icon-spinner2 spinner mr-2"),setTimeout(function(){var t="";if($.ajax({type:"POST",async:!1,url:site_path+"include/ajax/blank_excel_export.php",data:{table_header:tableHeader,filterProps:filterProps,priceCodes:priceCodes,file:t},success:function(e){if(void 0!==e&&""!==e)try{e=JSON.parse(e)}catch(e){}void 0!==e.TYPE?console.log(e.MESSAGE):void 0!==e&&""!==e&&(t=e)},complete:function(){e("icon-upload mr-2")}}),void 0!==t&&""!==t){var o=new Date,n=o.getDate();n<10&&(n="0"+n);var i=o.getMonth()+1;i<10&&(i="0"+i);var a=o.getHours();a<10&&(a="0"+a);var r=o.getMinutes();r<10&&(r="0"+r);var s=o.getSeconds();s<10&&(s="0"+s);var d=1e9*Math.random()-.5;d=Math.round(d);var l="blank_"+o.getFullYear()+"_"+i+"_"+n+"_"+a+"_"+r+"_"+s+"_"+d+".xlsx",c=document.createElement("a");c.setAttribute("href",t),c.setAttribute("download",l);var u=document.createEvent("MouseEvents");u.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),c.dispatchEvent(u)}},15)}function o(e){let t=document.querySelectorAll("#mfi-mfiEXCEL_FILE-button > span > i");for(let o=0;o<t.length;o++)t[o].setAttribute("class",e)}window.JCCatalogSectionComponent||(window.JCCatalogSectionComponent=function(e){this.formPosting=!1,this.siteId=e.siteId||"",this.ajaxId=e.ajaxId||"",this.template=e.template||"",this.componentPath=e.componentPath||"",this.parameters=e.parameters||"",e.navParams&&(this.navParams={NavNum:e.navParams.NavNum||1,NavPageNomer:parseInt(e.navParams.NavPageNomer)||1,NavPageCount:parseInt(e.navParams.NavPageCount)||1}),this.bigData=e.bigData||{enabled:!1},this.container=document.querySelector('[data-entity="'+e.container+'"]'),this.showMoreButton=null,this.showMoreButtonMessage=null,this.bigData.enabled&&BX.util.object_keys(this.bigData.rows).length>0&&(BX.cookie_prefix=this.bigData.js.cookiePrefix||"",BX.cookie_domain=this.bigData.js.cookieDomain||"",BX.current_server_time=this.bigData.js.serverTime,BX.ready(BX.delegate(this.bigDataLoad,this))),e.initiallyShowHeader&&BX.ready(BX.delegate(this.showHeader,this)),e.deferredLoad&&BX.ready(BX.delegate(this.deferredLoad,this)),e.lazyLoad&&(this.showMoreButton=document.querySelector('[data-use="show-more-'+this.navParams.NavNum+'"]'),this.showMoreButtonMessage=this.showMoreButton.innerHTML,BX.bind(this.showMoreButton,"click",BX.proxy(this.showMore,this))),e.loadOnScroll&&BX.bind(window,"scroll",BX.proxy(this.loadOnScroll,this))},window.JCCatalogSectionComponent.prototype={checkButton:function(){this.showMoreButton&&(this.navParams.NavPageNomer==this.navParams.NavPageCount?BX.remove(this.showMoreButton):this.container.appendChild(this.showMoreButton))},enableButton:function(){this.showMoreButton&&(BX.removeClass(this.showMoreButton,"disabled"),this.showMoreButton.innerHTML=this.showMoreButtonMessage)},disableButton:function(){this.showMoreButton&&(BX.addClass(this.showMoreButton,"disabled"),this.showMoreButton.innerHTML=BX.message("BTN_MESSAGE_LAZY_LOAD_WAITER"))},loadOnScroll:function(){var e=BX.GetWindowScrollPos().scrollTop,t=BX.pos(this.container).bottom;e+window.innerHeight>t&&this.showMore()},showMore:function(){if(this.navParams.NavPageNomer<this.navParams.NavPageCount){var e={action:"showMore"};e["PAGEN_"+this.navParams.NavNum]=this.navParams.NavPageNomer+1,this.formPosting||(this.formPosting=!0,this.disableButton(),this.sendRequest(e))}},bigDataLoad:function(){var e="https://analytics.bitrix.info/crecoms/v1_0/recoms.php",t=BX.ajax.prepareData(this.bigData.params);t&&(e+=(-1!==e.indexOf("?")?"&":"?")+t);var o=BX.delegate(function(e){this.sendRequest({action:"deferredLoad",bigData:"Y",items:e&&e.items||[],rid:e&&e.id,count:this.bigData.count,rowsRange:this.bigData.rowsRange,shownIds:this.bigData.shownIds})},this);BX.ajax({method:"GET",dataType:"json",url:e,timeout:3,onsuccess:o,onfailure:o})},deferredLoad:function(){this.sendRequest({action:"deferredLoad"})},sendRequest:function(e){var t={siteId:this.siteId,template:this.template,parameters:this.parameters};this.ajaxId&&(t.AJAX_ID=this.ajaxId),BX.ajax({url:this.componentPath+"/ajax.php"+(-1!==document.location.href.indexOf("clear_cache=Y")?"?clear_cache=Y":""),method:"POST",dataType:"json",timeout:60,data:BX.merge(t,e),onsuccess:BX.delegate(function(t){t&&t.JS&&BX.ajax.processScripts(BX.processHTML(t.JS).SCRIPT,!1,BX.delegate(function(){this.showAction(t,e)},this))},this)})},showAction:function(e,t){if(t)switch(t.action){case"showMore":this.processShowMoreAction(e);break;case"deferredLoad":this.processDeferredLoadAction(e,"Y"===t.bigData)}},processShowMoreAction:function(e){this.formPosting=!1,this.enableButton(),e&&(this.navParams.NavPageNomer++,this.processItems(e.items),this.processPagination(e.pagination),this.checkButton())},processDeferredLoadAction:function(e,t){if(e){var o=t?this.bigData.rows:{};this.processItems(e.items,BX.util.array_keys(o))}},processItems:function(e,t){if(e){var o,n,i,a=BX.processHTML(e,!1),r=BX.create("DIV");if(r.innerHTML=a.HTML,(o=r.querySelectorAll('[data-entity="items-row"]')).length){for(n in this.showHeader(!0),o)o.hasOwnProperty(n)&&(i=!!t&&this.container.querySelectorAll('[data-entity="items-row"]'),o[n].style.opacity=0,i&&BX.type.isDomNode(i[t[n]])?i[t[n]].parentNode.insertBefore(o[n],i[t[n]]):this.container.appendChild(o[n]));new BX.easing({duration:2e3,start:{opacity:0},finish:{opacity:100},transition:BX.easing.makeEaseOut(BX.easing.transitions.quad),step:function(e){for(var t in o)o.hasOwnProperty(t)&&(o[t].style.opacity=e.opacity/100)},complete:function(){for(var e in o)o.hasOwnProperty(e)&&o[e].removeAttribute("style")}}).animate()}BX.ajax.processScripts(a.SCRIPT)}},processPagination:function(e){if(e){var t=document.querySelectorAll('[data-pagination-num="'+this.navParams.NavNum+'"]');for(var o in t)t.hasOwnProperty(o)&&(t[o].innerHTML=e)}},showHeader:function(e){var t,o=BX.findParent(this.container,{attr:{"data-entity":"parent-container"}});o&&BX.type.isDomNode(o)&&(t=o.querySelector('[data-entity="header"]'))&&"true"!=t.getAttribute("data-showed")&&(t.style.display="",e?new BX.easing({duration:2e3,start:{opacity:0},finish:{opacity:100},transition:BX.easing.makeEaseOut(BX.easing.transitions.quad),step:function(e){t.style.opacity=e.opacity/100},complete:function(){t.removeAttribute("style"),t.setAttribute("data-showed","true")}}).animate():t.style.opacity=100)}},$(document).on("click touchstart","button.add_to_cart",this,function(){document.querySelector(".modal_add_to_bascket-preloader").style.display="flex",document.querySelector(".modal_add_to_bascket-on_success").style.display="none",document.querySelector(".modal_add_to_bascket-on_error").style.display="none",setTimeout($.ajax({type:"POST",url:site_path+"include/ajax/b2b_buy.php",data:{action:"add"},success:function(e){if("OK"===(e=JSON.parse(e)).STATUS){var t=$(".form-control.touchspin-empty");$.each(t,function(e,t){$(t).val(0)}),$(".cart_header a span:last-child").html(e.BASKET_ITEM_QNT),document.querySelector(".modal_add_to_bascket-on_success").style.display="block",document.querySelector(".modal_add_to_bascket-preloader").style.display="none"}else 0===e.length&&(document.querySelector(".modal_add_to_bascket-on_error").style.display="block",document.querySelector(".modal_add_to_bascket-preloader").style.display="none")},error:function(){document.querySelector(".modal_add_to_bascket-on_error").style.display="block",document.querySelector(".modal_add_to_bascket-preloader").style.display="none"}}),15)}),$(document).ready(function(){$(document).on("click touchstart","#blank-export-in-excel",this,t)}),BX.addCustomEvent("onUploadDone",function(e){""!==e.file_id&&void 0!==e.file_id&&(o("icon-spinner2 spinner mr-2"),setTimeout(function(){$.ajax({type:"POST",async:!1,url:site_path+"include/ajax/blank_excel_import.php",data:{file_id:e.file_id,quantity:tableHeader.QUANTITY},success:function(e){if(void 0!==e&&"null"!==e&&""!==e){var t=JSON.parse(e);Object.keys(t).length;void 0!==t.TYPE&&"null"!==t.TYPE&&""!==t.TYPE||location.reload()}else location.reload()},complete:function(){o("icon-upload mr-2")}})},15))}))}(),$(document).ready(function(){var e=document.querySelectorAll(".bootstrap-touchspin-up"),t=document.querySelectorAll(".bootstrap-touchspin-down");for(let n=0;n<e.length;n++)"ontouchstart"in window?(e[n].addEventListener("touchstart",function(){o(this)}),t[n].addEventListener("touchstart",function(){o(this)})):(e[n].addEventListener("click",function(){o(this)}),t[n].addEventListener("click",function(){o(this)}));function o(e){var t=$(e).offsetParent().find(".form-control.touchspin-empty");if(t.length>0){var o=$(t).data("id"),n=$(t).val(),i=$(e).parentsUntil("tbody").filter("tr"),a=$(i).children("td.js-product-property"),r=$(i).children("td.js-price"),s={},d={};$.each(a,function(e,t){var o={};o.CODE=$(t).data("propcode"),o.VALUE=$(t).html(),o.NAME=$(t).data("propname"),s[e]=o}),$.each(r,function(e,t){var o={};""!==$(t).html()&&(o.VALUE=$(t).data("price_value"),o.NAME=$(t).data("price_name"),o.CODE=$(t).data("price_code"),o.CURRENCY=$(t).html().replace(/[\d\s]+/g,""),d[e]=o)}),$.ajax({type:"POST",url:site_path+"include/ajax/blank_ids.php",data:{id:o,qnt:n,props:s,prices:d,baseCurrency:baseCurrency},success:function(e){var t=JSON.parse(e);if(t){var o=0;t.TOTAL_COUNT&&(o=t.TOTAL_COUNT),$(".index_blank-add_cart-number").html(o);var n=0;t.TOTAL_PRICE&&(n=t.TOTAL_PRICE),$(".index_blank-add_cart-total").html(n)}}})}}var n=$(".form-control.touchspin-empty");$.each(n,function(e,t){t.addEventListener("input",function(){this.timer&&clearTimeout(this.timer),this.timer=setTimeout(o(this),700)})})}),window.addEventListener("load",function(){setEarsTopPosition(),relocateTableHeader(),window.addEventListener("scroll",setEarsTopPosition)}),window.addEventListener("DOMContentLoaded",function(){setEventsIndexBlankTable(),fixAddToCard()});